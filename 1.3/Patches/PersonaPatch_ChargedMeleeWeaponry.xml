<?xml version="1.0" encoding="utf-8"?>
<!--
    Charged Melee Weaponry

    V_ChargeCutter_Bond = persona charge cutter
    V_ChargeKatana_Bond = persona charge katana
    V_ChargeLongSword_Bond = persona charge longsword
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Charged Melee Weaponry</li>
        </mods>

        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs</xpath>
                    <value>
                        <!-- Meele -->
                        <!-- V_ChargeCutter_Bond -->
                        <ThingDef ParentName="MPBFPM_MeleeWeaponUltratech">
                            <defName>V_ChargeCutter_Bond</defName>
                            <label>persona charge cutter</label>
                            <description>A spacer-tech combat knife utilizing charge technology. The blade charges with unstable energy when the trigger is held, allowing easier armor penetration. The lightweight plasteel material allows for fast attacks.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <meleeHitSound>Heavy_Melee</meleeHitSound>
                            <equippedAngleOffset>-10</equippedAngleOffset>
                            <weaponClasses>
                                <li>MeleePiercer</li>
                            </weaponClasses>
                            <weaponTags>
                                <li>V_ChargedMelee</li>
                            </weaponTags>
                            <graphicData>
                                <texPath>Things/Weapons/V_ChargedCutter</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>1.5</drawSize>
                            </graphicData>
                            <tools>
                                <li>
                                    <label>handle</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>9.90</power>
                                    <cooldownTime>1.360</cooldownTime>
                                </li>
                                <li>
                                    <label>point</label>
                                    <capacities>
                                        <li>Stab</li>
                                    </capacities>
                                    <power>19.80</power>
                                    <cooldownTime>1.360</cooldownTime>
                                    <armorPenetration>0.726</armorPenetration>
                                </li>
                                <li>
                                    <label>edge</label>
                                    <capacities>
                                        <li>Cut</li>
                                    </capacities>
                                    <power>15.40</power>
                                    <cooldownTime>1.020</cooldownTime>
                                    <armorPenetration>0.550</armorPenetration>
                                </li>
                            </tools>
                            <statBases>
                                <Mass>1</Mass>
                            </statBases>
                        </ThingDef>

                        <RecipeDef>
                            <defName>Make_V_ChargeCutter_Bond</defName>
                            <label>bond charge cutter</label>
                            <description>Bond an charge cutter.</description>
                            <jobString>Bonding a charge cutter.</jobString>
                            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
                            <effectWorking>Cook</effectWorking>
                            <soundWorking>Recipe_Machining</soundWorking>
                            <workAmount>200000</workAmount>
                            <unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
                            <researchPrerequisite>ChargedShot</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>V_ChargeCutter</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>V_ChargeCutter</li>
                                    <li>BondingCore</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <V_ChargeCutter_Bond>1</V_ChargeCutter_Bond>
                            </products>
                            <skillRequirements>
                                <Intellectual>15</Intellectual>
                            </skillRequirements>
                            <workSkill>Intellectual</workSkill>
                            <recipeUsers>
                                <li>BondingBench</li>
                            </recipeUsers>
                        </RecipeDef>

                        <!-- V_ChargeKatana_Bond -->
                        <ThingDef ParentName="MPBFPM_MeleeWeaponUltratech">
                            <defName>V_ChargeKatana</defName>
                            <label>persona charge katana</label>
                            <description>A spacer-tech elegant katana utilizing charge technology. The blade charges with unstable energy when the trigger is held, allowing easier armor penetration. The lightweight plasteel material and refined blade allows for fast attacks.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <meleeHitSound>Heavy_Melee</meleeHitSound>
                            <equippedAngleOffset>-10</equippedAngleOffset>
                            <weaponClasses>
                                <li>MeleePiercer</li>
                            </weaponClasses>
                            <weaponTags>
                                <li>V_ChargedMelee</li>
                            </weaponTags>
                            <graphicData>
                                <texPath>Things/Weapons/V_ChargedKatana</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>1.5</drawSize>
                            </graphicData>
                            <tools>
                                <li>
                                    <label>handle</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>9.90</power>
                                    <cooldownTime>1.105</cooldownTime>
                                </li>
                                <li>
                                    <label>point</label>
                                    <capacities>
                                        <li>Stab</li>
                                    </capacities>
                                    <power>19.80</power>
                                    <cooldownTime>1.190</cooldownTime>
                                    <armorPenetration>0.</armorPenetration>
                                </li>
                                <li>
                                    <label>edge</label>
                                    <capacities>
                                        <li>Cut</li>
                                    </capacities>
                                    <power>16.50</power>
                                    <cooldownTime>0.935</cooldownTime>
                                    <armorPenetration>0.627</armorPenetration>
                                </li>
                            </tools>
                            <statBases>
                                <Mass>2</Mass>
                            </statBases>
                        </ThingDef>

                        <RecipeDef>
                            <defName>Make_V_ChargeKatana_Bond</defName>
                            <label>bond charge katana</label>
                            <description>Bond an charge katana.</description>
                            <jobString>Bonding a charge katana.</jobString>
                            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
                            <effectWorking>Cook</effectWorking>
                            <soundWorking>Recipe_Machining</soundWorking>
                            <workAmount>200000</workAmount>
                            <unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
                            <researchPrerequisite>ChargedShot</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>V_ChargeKatana</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>V_ChargeKatana</li>
                                    <li>BondingCore</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <V_ChargeKatana_Bond>1</V_ChargeKatana_Bond>
                            </products>
                            <skillRequirements>
                                <Intellectual>15</Intellectual>
                            </skillRequirements>
                            <workSkill>Intellectual</workSkill>
                            <recipeUsers>
                                <li>BondingBench</li>
                            </recipeUsers>
                        </RecipeDef>

                        <!-- V_ChargeLongSword_Bond -->
                        <ThingDef ParentName="MPBFPM_MeleeWeaponUltratech">
                            <defName>V_ChargeLongSword_Bond</defName>
                            <label>persona charge longsword</label>
                            <description>A spacer-tech Long Sword utilizing charge technology. The blade charges with unstable energy when the trigger is held, allowing easier armor penetration. Due to the heavy weight of plasteel material it slowsdown the user's attacks.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <meleeHitSound>Heavy_Melee</meleeHitSound>
                            <equippedAngleOffset>-10</equippedAngleOffset>
                            <weaponClasses>
                                <li>MeleePiercer</li>
                            </weaponClasses>
                            <weaponTags>
                                <li>V_ChargedMelee</li>
                            </weaponTags>
                            <graphicData>
                                <texPath>Things/Weapons/V_ChargedLongSword</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>1.5</drawSize>
                            </graphicData>
                            <tools>
                                <li>
                                    <label>handle</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>9.90</power>
                                    <cooldownTime>1.360</cooldownTime>
                                </li>
                                <li>
                                    <label>point</label>
                                    <capacities>
                                        <li>Stab</li>
                                    </capacities>
                                    <power>22.00</power>
                                    <cooldownTime>1.530</cooldownTime>
                                    <armorPenetration>0.781</armorPenetration>
                                </li>
                                <li>
                                    <label>edge</label>
                                    <capacities>
                                        <li>Cut</li>
                                    </capacities>
                                    <power>19.80</power>
                                    <cooldownTime>1.360</cooldownTime>
                                    <armorPenetration>0.682</armorPenetration>
                                </li>
                            </tools>
                            <statBases>
                                <Mass>4</Mass>
                            </statBases>
                        </ThingDef>

                        <RecipeDef>
                            <defName>Make_V_ChargeLongSword_Bond</defName>
                            <label>bond charge longsword</label>
                            <description>Bond an charge longsword.</description>
                            <jobString>Bonding a charge longsword.</jobString>
                            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
                            <effectWorking>Cook</effectWorking>
                            <soundWorking>Recipe_Machining</soundWorking>
                            <workAmount>200000</workAmount>
                            <unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
                            <researchPrerequisite>ChargedShot</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>V_ChargeLongSword</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>V_ChargeLongSword</li>
                                    <li>BondingCore</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <V_ChargeLongSword_Bond>1</V_ChargeLongSword_Bond>
                            </products>
                            <skillRequirements>
                                <Intellectual>15</Intellectual>
                            </skillRequirements>
                            <workSkill>Intellectual</workSkill>
                            <recipeUsers>
                                <li>BondingBench</li>
                            </recipeUsers>
                        </RecipeDef>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>