<?xml version="1.0" encoding="utf-8"?>
<!--
    ===== Star Wars - Fully Functional Lightsabers (Continued) =====

    == Melee
    SWSaber_Lightsaber_Bond = persona lightsaber (prototype)
    SWSaber_DookuSaber_Bond = persona lightsaber (curved hilt)
    SWSaber_KyloSaber_Bond = persona lightsaber (cross hilt)
    SWSaber_Doublesaber_Bond = persona lightsaber (double)
    SWSaber_ObiSaber_Bond = persona lightsaber (old style hilt)
    SWSaber_ElectrumSaber_Bond = persona lightsaber (electrum hilt)
    SWSaber_Ahsokasaber_Bond = persona lightsaber (Ahsoka Tano)
    SWSaber_Inquis_Bond = persona double lightsaber (Inquisitor)
    SWSaber_JGuard_Bond = persona Honor Guard Saberstaff
    SWSaber_Quigon_Bond = persona lightsaber (Qui-Gon Jinn)
    SWSaber_Darksaber_Bond = persona lightsaber (Darksaber)
    SWSaber_Yodasaber_Bond = persona lightsaber (Yoda)
    SWSaber_MaceSaber_Bond = persona lightsaber (Mace Windu)
    SWSaber_SaberPike_Bond = persona lightsaber pike
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Star Wars - Fully Functional Lightsabers (Continued)</li>
            <li>Star Wars - Fully Functional Lightsabers</li>
        </mods>

        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs</xpath>
                    <value>
                        <!-- ===== Melee ===== -->
                        <!-- SWSaber_Lightsaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Lightsaber_Bond</defName>
                            <label>bond lightsaber (prototype)</label>
                            <description>Bond an lightsaber (prototype).</description>
                            <jobString>Bonding a lightsaber (prototype).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Lightsaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Lightsaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Lightsaber_Bond>1</SWSaber_Lightsaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_DookuSaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_DookuSaber_Bond</defName>
                            <label>bond lightsaber (curved hilt)</label>
                            <description>Bond an lightsaber (curved hilt).</description>
                            <jobString>Bonding a lightsaber (curved hilt).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_DookuSaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_DookuSaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_DookuSaber_Bond>1</SWSaber_DookuSaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_KyloSaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_KyloSaber_Bond</defName>
                            <label>bond lightsaber (cross hilt)</label>
                            <description>Bond an lightsaber (cross hilt).</description>
                            <jobString>Bonding a lightsaber (cross hilt).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_KyloSaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_KyloSaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_KyloSaber_Bond>1</SWSaber_KyloSaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Doublesaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Doublesaber_Bond</defName>
                            <label>bond lightsaber (double)</label>
                            <description>Bond an lightsaber (double).</description>
                            <jobString>Bonding a lightsaber (double).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Doublesaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Doublesaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Doublesaber_Bond>1</SWSaber_Doublesaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_ObiSaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_ObiSaber_Bond</defName>
                            <label>bond lightsaber (old style hilt)</label>
                            <description>Bond an lightsaber (old style hilt).</description>
                            <jobString>Bonding a lightsaber (old style hilt).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_ObiSaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_ObiSaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_ObiSaber_Bond>1</SWSaber_ObiSaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_ElectrumSaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_ElectrumSaber_Bond</defName>
                            <label>bond lightsaber (electrum hilt)</label>
                            <description>Bond an lightsaber (electrum hilt).</description>
                            <jobString>Bonding a lightsaber (electrum hilt).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_ElectrumSaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_ElectrumSaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_ElectrumSaber_Bond>1</SWSaber_ElectrumSaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Ahsokasaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Ahsokasaber_Bond</defName>
                            <label>bond lightsaber (Ahsoka Tano)</label>
                            <description>Bond an lightsaber (Ahsoka Tano).</description>
                            <jobString>Bonding a lightsaber (Ahsoka Tano).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Ahsokasaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Ahsokasaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Ahsokasaber_Bond>1</SWSaber_Ahsokasaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Inquis_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Inquis_Bond</defName>
                            <label>bond double lightsaber (Inquisitor)</label>
                            <description>Bond an double lightsaber (Inquisitor).</description>
                            <jobString>Bonding a double lightsaber (Inquisitor).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Inquis</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Inquis</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Inquis_Bond>1</SWSaber_Inquis_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_JGuard_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_JGuard_Bond</defName>
                            <label>bond Honor Guard Saberstaff</label>
                            <description>Bond an Honor Guard Saberstaff.</description>
                            <jobString>Bonding a Honor Guard Saberstaff.</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_JGuard</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_JGuard</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_JGuard_Bond>1</SWSaber_JGuard_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Quigon_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Quigon_Bond</defName>
                            <label>bond lightsaber (Qui-Gon Jinn)</label>
                            <description>Bond an lightsaber (Qui-Gon Jinn).</description>
                            <jobString>Bonding a lightsaber (Qui-Gon Jinn).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Quigon</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Quigon</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Quigon_Bond>1</SWSaber_Quigon_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Darksaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Darksaber_Bond</defName>
                            <label>bond lightsaber (Darksaber)</label>
                            <description>Bond an lightsaber (Darksaber).</description>
                            <jobString>Bonding a lightsaber (Darksaber).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Darksaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Darksaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Darksaber_Bond>1</SWSaber_Darksaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_Yodasaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_Yodasaber_Bond</defName>
                            <label>bond lightsaber (Yoda)</label>
                            <description>Bond an lightsaber (Yoda).</description>
                            <jobString>Bonding a lightsaber (Yoda).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_Yodasaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_Yodasaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_Yodasaber_Bond>1</SWSaber_Yodasaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_MaceSaber_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_MaceSaber_Bond</defName>
                            <label>bond lightsaber (Mace Windu)</label>
                            <description>Bond an lightsaber (Mace Windu).</description>
                            <jobString>Bonding a lightsaber (Mace Windu).</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_MaceSaber</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_MaceSaber</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_MaceSaber_Bond>1</SWSaber_MaceSaber_Bond>
                            </products>
                        </RecipeDef>

                        <!-- SWSaber_SaberPike_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_SWSaber_SaberPike_Bond</defName>
                            <label>bond lightsaber pike</label>
                            <description>Bond an lightsaber pike.</description>
                            <jobString>Bonding a lightsaber pike.</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>SWSaber_SaberPike</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>PersonaBondForge_ThingDef_BondingCore</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>SWSaber_SaberPike</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <SWSaber_SaberPike_Bond>1</SWSaber_SaberPike_Bond>
                            </products>
                        </RecipeDef>
                    </value>
                </li>

                <li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
                    <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                    <key>Daria40K_MightyPersonaBondForgePatch_StarWarsLightsabersContinued</key>
                    <defaultValue>true</defaultValue>
                    <caseFalse>
                        <!-- SWSaber_Lightsaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Lightsaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_DookuSaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_DookuSaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_KyloSaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_KyloSaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Doublesaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Doublesaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_ObiSaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_ObiSaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_ElectrumSaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_ElectrumSaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Ahsokasaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Ahsokasaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Inquis_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Inquis_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_JGuard_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_JGuard_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Quigon_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Quigon_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Darksaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Darksaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_Yodasaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_Yodasaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_MaceSaber_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_MaceSaber_Bond"]</xpath>
                        </Operation>

                        <!-- SWSaber_SaberPike_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_SWSaber_SaberPike_Bond"]</xpath>
                        </Operation>
                    </caseFalse>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>