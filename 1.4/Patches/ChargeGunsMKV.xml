<?xml version="1.0" encoding="utf-8"?>
<!--
    ===== Charge Guns MKV =====
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Charge Guns MKV</li>
        </mods>

        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="Gun_ChargeSniper_MKV_Bond" Abstract="True">
                            <label>persona Charge Sniper MKV</label>
                            <description>The 5th version of the highly advanced version of the charged-shot sniper rifle. Pulse-charge technology charges each shot with unstable energy as it leaves the barrel. Released on impact, the charged energy greatly increases the damage done.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <techLevel>Spacer</techLevel>
                            <graphicData>
                                <texPath>Things/Item/Equipment/WeaponRanged/ChargeSniperMKV</texPath>
                            </graphicData>
                            <soundInteract>Interact_ChargeRifle</soundInteract>
                            <statBases>
                                <Mass>4.6</Mass>
                                <AccuracyTouch>1.089</AccuracyTouch>
                                <AccuracyShort>1.089</AccuracyShort>
                                <AccuracyMedium>1.089</AccuracyMedium>
                                <AccuracyLong>1.089</AccuracyLong>
                                <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
                            </statBases>
                            <weaponTags>
                                <li>SpacerGun</li>
                            </weaponTags>
                            <verbs>
                                <li>
                                    <verbClass>Verb_Shoot</verbClass>
                                    <hasStandardCommand>true</hasStandardCommand>
                                    <defaultProjectile>Bullet_ChargeSniper_MKV_Bond</defaultProjectile>
                                    <warmupTime>0.85</warmupTime>
                                    <range>49.9</range>
                                    <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
                                    <burstShotCount>1</burstShotCount>
                                    <soundCast>Shot_ChargeRifle</soundCast>
                                    <soundCastTail>GunTail_Medium</soundCastTail>
                                    <muzzleFlashScale>12</muzzleFlashScale>
                                </li>
                            </verbs>
                            <tools>
                                <li>
                                    <label>stock</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>9.75</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                                <li>
                                    <label>barrel</label>
                                    <capacities>
                                        <li>Blunt</li>
                                        <li>Poke</li>
                                    </capacities>
                                    <power>9.75</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                            </tools>
                        </ThingDef>

                        <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="Gun_ChargeRifle_MKV_Bond" Abstract="True">
                            <label>persona Charge Rifle MKV</label>
                            <description>The 5th version of the highly advanced version of the charged-shot assault rifle. Pulse-charge technology charges each shot with unstable energy as it leaves the barrel. Released on impact, the charged energy greatly increases the damage done.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <techLevel>Spacer</techLevel>
                            <graphicData>
                                <texPath>Things/Item/Equipment/WeaponRanged/ChargeRifleMKV</texPath>
                            </graphicData>
                            <soundInteract>Interact_ChargeRifle</soundInteract>
                            <statBases>
                                <Mass>4.6</Mass>
                                <AccuracyTouch>0.605</AccuracyTouch>
                                <AccuracyShort>0.704</AccuracyShort>
                                <AccuracyMedium>0.605</AccuracyMedium>
                                <AccuracyLong>0.495</AccuracyLong>
                                <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
                            </statBases>
                            <weaponTags>
                                <li>SpacerGun</li>
                            </weaponTags>
                            <verbs>
                                <li>
                                    <verbClass>Verb_Shoot</verbClass>
                                    <hasStandardCommand>true</hasStandardCommand>
                                    <defaultProjectile>Bullet_ChargeRifle_MKV_Bond</defaultProjectile>
                                    <warmupTime>0.85</warmupTime>
                                    <range>31.9</range>
                                    <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
                                    <burstShotCount>5</burstShotCount>
                                    <soundCast>Shot_ChargeRifle</soundCast>
                                    <soundCastTail>GunTail_Medium</soundCastTail>
                                    <muzzleFlashScale>9</muzzleFlashScale>
                                </li>
                            </verbs>
                            <tools>
                                <li>
                                    <label>stock</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>9.75</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                                <li>
                                    <label>barrel</label>
                                    <capacities>
                                        <li>Blunt</li>
                                        <li>Poke</li>
                                    </capacities>
                                    <power>9.75</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                            </tools>
                        </ThingDef>

                        <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="Gun_ChargePistol_MKV_Bond" Abstract="True">
                            <label>persona Charge Pistol MKV</label>
                            <description>A highly advanced charged-shot pistol. Pulse-charge technology charges each shot with unstable energy as it leaves the barrel. Released on impact, the charged energy greatly increases the damage done.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                            <techLevel>Spacer</techLevel>
                            <graphicData>
                                <texPath>Things/Item/Equipment/WeaponRanged/ChargePistolMKV</texPath>
                            </graphicData>
                            <soundInteract>Interact_ChargeRifle</soundInteract>
                            <statBases>
                                <Mass>1.6</Mass>
                                <AccuracyTouch>1.089</AccuracyTouch>
                                <AccuracyShort>0.979</AccuracyShort>
                                <AccuracyMedium>0.869</AccuracyMedium>
                                <AccuracyLong>0.759</AccuracyLong>
                                <RangedWeapon_Cooldown>0.34</RangedWeapon_Cooldown>
                            </statBases>
                            <weaponTags>
                                <li>SpacerGun</li>
                            </weaponTags>
                            <verbs>
                                <li>
                                    <verbClass>Verb_Shoot</verbClass>
                                    <hasStandardCommand>true</hasStandardCommand>
                                    <defaultProjectile>Bullet_ChargePistol_MKV_Bond</defaultProjectile>
                                    <warmupTime>0.425</warmupTime>
                                    <range>26</range>
                                    <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
                                    <burstShotCount>5</burstShotCount>
                                    <soundCast>Shot_ChargeRifle</soundCast>
                                    <soundCastTail>GunTail_Medium</soundCastTail>
                                    <muzzleFlashScale>3</muzzleFlashScale>
                                </li>
                            </verbs>
                            <tools>
                                <li>
                                    <label>stock</label>
                                    <capacities>
                                        <li>Blunt</li>
                                    </capacities>
                                    <power>7.661</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                                <li>
                                    <label>barrel</label>
                                    <capacities>
                                        <li>Blunt</li>
                                        <li>Poke</li>
                                    </capacities>
                                    <power>7.661</power>
                                    <cooldownTime>1.7</cooldownTime>
                                </li>
                            </tools>
                        </ThingDef>

                        <ThingDef ParentName="MPBFPM_Bullet" Name="Bullet_ChargeSniper_MKV_Bond" Abstract="True">
                            <label>charge sniper shot MKV</label>
                            <graphicData>
                                <texPath>Things/Projectile/Charge_MKV</texPath>
                            </graphicData>
                            <projectile>
                                <damageAmountBase>58</damageAmountBase>
                                <stoppingPower>5.0</stoppingPower>
                                <armorPenetrationBase>0.95</armorPenetrationBase>
                                <speed>120</speed>
                            </projectile>
                        </ThingDef>

                        <ThingDef ParentName="MPBFPM_Bullet" Name="Bullet_ChargeRifle_MKV_Bond" Abstract="True">
                            <label>charge shot MKV</label>
                            <graphicData>
                                <texPath>Things/Projectile/Charge_MKV</texPath>
                            </graphicData>
                            <projectile>
                                <damageAmountBase>21</damageAmountBase>
                                <armorPenetrationBase>0.40</armorPenetrationBase>
                                <speed>70</speed>
                            </projectile>
                        </ThingDef>

                        <ThingDef ParentName="MPBFPM_Bullet" Name="Bullet_ChargePistol_MKV_Bond" Abstract="True">
                            <label>charge shot MKV</label>
                            <graphicData>
                                <texPath>Things/Projectile/ChargeP_MKV</texPath>
                            </graphicData>
                            <projectile>
                                <damageAmountBase>13</damageAmountBase>
                                <armorPenetrationBase>0.20</armorPenetrationBase>
                                <speed>50</speed>
                            </projectile>
                        </ThingDef>
                    </value>
                </li>

                <li Class="PatchOperationFindMod">
                    <mods>
                        <li>XML Extensions</li>
                    </mods>

                    <nomatch Class="PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value>
                            <!-- Gun_ChargeSniper_MKV_Bond -->
                            <ThingDef ParentName="Gun_ChargeSniper_MKV_Bond">
                                <defName>Gun_ChargeSniper_MKV_Bond</defName>
                            </ThingDef>

                            <!-- Gun_ChargeRifle_MKV_Bond -->
                            <ThingDef ParentName="Gun_ChargeRifle_MKV_Bond">
                                <defName>Gun_ChargeRifle_MKV_Bond</defName>
                            </ThingDef>

                            <!-- Gun_ChargePistol_MKV_Bond -->
                            <ThingDef ParentName="Gun_ChargePistol_MKV_Bond">
                                <defName>Gun_ChargePistol_MKV_Bond</defName>
                            </ThingDef>

                            <!-- Bullet_ChargeSniper_MKV_Bond -->
                            <ThingDef ParentName="Bullet_ChargeSniper_MKV_Bond">
                                <defName>Bullet_ChargeSniper_MKV_Bond</defName>
                            </ThingDef>

                            <!-- Bullet_ChargeRifle_MKV_Bond -->
                            <ThingDef ParentName="Bullet_ChargeRifle_MKV_Bond">
                                <defName>Bullet_ChargeRifle_MKV_Bond</defName>
                            </ThingDef>

                            <!-- Bullet_ChargePistol_MKV_Bond -->
                            <ThingDef ParentName="Bullet_ChargePistol_MKV_Bond">
                                <defName>Bullet_ChargePistol_MKV_Bond</defName>
                            </ThingDef>
                        </value>
                    </nomatch>

                    <match Class="PatchOperationSequence">
                        <operations>
                            <li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
                                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                                <key>Daria40K_MightyPersonaBondForgePatch_ChargeGunsMKV</key>
                                <defaultValue>true</defaultValue>

                                <caseTrue>
                                    <Operation Class="XmlExtensions.PatchOperationAdd">
                                        <xpath>Defs</xpath>
                                        <value>
                                            <!-- Gun_ChargeSniper_MKV_Bond -->
                                            <ThingDef ParentName="Gun_ChargeSniper_MKV_Bond">
                                                <defName>Gun_ChargeSniper_MKV_Bond</defName>
                                            </ThingDef>

                                            <!-- Gun_ChargeRifle_MKV_Bond -->
                                            <ThingDef ParentName="Gun_ChargeRifle_MKV_Bond">
                                                <defName>Gun_ChargeRifle_MKV_Bond</defName>
                                            </ThingDef>

                                            <!-- Gun_ChargePistol_MKV_Bond -->
                                            <ThingDef ParentName="Gun_ChargePistol_MKV_Bond">
                                                <defName>Gun_ChargePistol_MKV_Bond</defName>
                                            </ThingDef>

                                            <!-- Bullet_ChargeSniper_MKV_Bond -->
                                            <ThingDef ParentName="Bullet_ChargeSniper_MKV_Bond">
                                                <defName>Bullet_ChargeSniper_MKV_Bond</defName>
                                            </ThingDef>

                                            <!-- Bullet_ChargeRifle_MKV_Bond -->
                                            <ThingDef ParentName="Bullet_ChargeRifle_MKV_Bond">
                                                <defName>Bullet_ChargeRifle_MKV_Bond</defName>
                                            </ThingDef>

                                            <!-- Bullet_ChargePistol_MKV_Bond -->
                                            <ThingDef ParentName="Bullet_ChargePistol_MKV_Bond">
                                                <defName>Bullet_ChargePistol_MKV_Bond</defName>
                                            </ThingDef>
                                        </value>
                                    </Operation>
                                </caseTrue>
                            </li>
                        </operations>
                    </match>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>
