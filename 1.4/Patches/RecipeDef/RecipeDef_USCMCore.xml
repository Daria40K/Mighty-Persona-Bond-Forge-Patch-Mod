<?xml version="1.0" encoding="utf-8"?>
<!-- ===== USCM - Core ===== == Range
	Gun_M4A3_USCM_Bond = persona M4A3 Service Pistol
	Gun_M4A4_USCM_Bond = persona M4A4 Pistol
	Gun_88mod4_USCM_Bond = persona 88 Mod 4 Combat Pistol
	Gun_M37A2_USCM_Bond = persona M37A2 Pump Shotgun
	Gun_M41A_USCM_Bond = persona M41A Pulse Rifle
	Gun_M42A_USCM_Bond = persona M42A Sniper Rifle
	Gun_M56_USCM_Bond = persona M56 Smartgun
	Gun_M240_USCM_Bond = persona M240 Incinerator Unit
	Gun_M5_USCM_Bond = persona M5 Rocket Propelled Grenade
-->
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>USCM - Core</li>
		</mods>

		<match Class="PatchOperationSequence">
			<success>Always</success>
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<!-- ===== Range ===== -->
						<!-- Gun_M4A3_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M4A3_USCM_Bond</defName>
							<label>bond M4A3 Service Pistol</label>
							<description>Bond an M4A3 Service Pistol.</description>
							<jobString>Bonding a M4A3 Service Pistol.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M4A3_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M4A3_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M4A3_USCM_Bond>1</Gun_M4A3_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M4A4_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M4A4_USCM_Bond</defName>
							<label>bond M4A4 Pistol</label>
							<description>Bond an M4A4 Pistol.</description>
							<jobString>Bonding a M4A4 Pistol.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M4A4_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M4A4_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M4A4_USCM_Bond>1</Gun_M4A4_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_88mod4_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_88mod4_USCM_Bond</defName>
							<label>bond 88 Mod 4 Combat Pistol</label>
							<description>Bond an 88 Mod 4 Combat Pistol.</description>
							<jobString>Bonding a 88 Mod 4 Combat Pistol.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_88mod4_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_88mod4_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_88mod4_USCM_Bond>1</Gun_88mod4_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M37A2_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M37A2_USCM_Bond</defName>
							<label>bond M37A2 Pump Shotgun</label>
							<description>Bond an M37A2 Pump Shotgun.</description>
							<jobString>Bonding a M37A2 Pump Shotgun.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M37A2_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M37A2_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M37A2_USCM_Bond>1</Gun_M37A2_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M41A_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M41A_USCM_Bond</defName>
							<label>bond M41A Pulse Rifle</label>
							<description>Bond an M41A Pulse Rifle.</description>
							<jobString>Bonding a M41A Pulse Rifle.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M41A_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M41A_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M41A_USCM_Bond>1</Gun_M41A_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M42A_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M42A_USCM_Bond</defName>
							<label>bond M42A Sniper Rifle</label>
							<description>Bond an M42A Sniper Rifle.</description>
							<jobString>Bonding a M42A Sniper Rifle.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M42A_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M42A_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M42A_USCM_Bond>1</Gun_M42A_USCM_Bond>
							</products>
						</RecipeDef>


						<!-- Gun_M56_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M56_USCM_Bond</defName>
							<label>bond M56 Smartgun</label>
							<description>Bond an M56 Smartgun.</description>
							<jobString>Bonding a M56 Smartgun.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M56_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M56_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M56_USCM_Bond>1</Gun_M56_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M240_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M240_USCM_Bond</defName>
							<label>bond M240 Incinerator Unit</label>
							<description>Bond an M240 Incinerator Unit.</description>
							<jobString>Bonding a M240 Incinerator Unit.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M240_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M240_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M240_USCM_Bond>1</Gun_M240_USCM_Bond>
							</products>
						</RecipeDef>

						<!-- Gun_M5_USCM_Bond -->
						<RecipeDef ParentName="MPBFPM_RecipeDefBase">
							<defName>Make_Gun_M5_USCM_Bond</defName>
							<label>bond M5 Rocket Propelled Grenade</label>
							<description>Bond an M5 Rocket Propelled Grenade.</description>
							<jobString>Bonding a M5 Rocket Propelled Grenade.</jobString>
							<ingredients>
								<li>
									<filter>
										<thingDefs>
											<li>Gun_M5_USCM</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<thingDefs>
									<li>Gun_M5_USCM</li>
								</thingDefs>
							</fixedIngredientFilter>
							<products>
								<Gun_M5_USCM_Bond>1</Gun_M5_USCM_Bond>
							</products>
						</RecipeDef>
					</value>
				</li>

				<li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
					<modId>Daria40K.MightyPersonaBondForgePatch</modId>
					<key>Daria40K_MightyPersonaBondForgePatch_USCMCore</key>
					<defaultValue>true</defaultValue>
					<caseFalse>
						<!-- Gun_M4A3_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M4A3_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M4A4_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M4A4_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_88mod4_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_88mod4_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M37A2_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M37A2_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M41A_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M41A_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M42A_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M42A_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M56_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M56_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M240_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M240_USCM_Bond"]</xpath>
						</Operation>

						<!-- Gun_M5_USCM_Bond -->
						<Operation Class="XmlExtensions.PatchOperationRemove">
							<xpath>Defs/RecipeDef[defName="Make_Gun_M5_USCM_Bond"]</xpath>
						</Operation>
					</caseFalse>
				</li>
			</operations>
		</match>
	</Operation>
</Patch>