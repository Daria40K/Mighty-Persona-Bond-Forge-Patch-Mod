<?xml version="1.0" encoding="utf-8"?>
<!--
    ===== [RWY]Advanced Mechanoid Warfare =====
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>[RWY]Advanced Mechanoid Warfare</li>
        </mods>

        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SNomadRifle_Bond" Abstract="True">
                            <label>bond salvaged nomad rifle</label>
                            <description>Bond an salvaged nomad rifle.</description>
                            <jobString>Bonding a salvaged nomad rifle.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SNomadRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SNomadRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SNomadRifle_Bond>1</AMW_Gun_SNomadRifle_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_IonPistol_Bond" Abstract="True">
                            <label>bond ion pistol</label>
                            <description>Bond an ion pistol.</description>
                            <jobString>Bonding a ion pistol.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_IonPistol</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_IonPistol</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_IonPistol_Bond>1</AMW_Gun_IonPistol_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SShreder_Bond" Abstract="True">
                            <label>bond salvaged shreder</label>
                            <description>Bond an salvaged shreder.</description>
                            <jobString>Bonding a salvaged shreder.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SShreder</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SShreder</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SShreder_Bond>1</AMW_Gun_SShreder_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SMG_Bond" Abstract="True">
                            <label>bond mechanoid smg</label>
                            <description>Bond an mechanoid smg.</description>
                            <jobString>Bonding a mechanoid smg.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SMG</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SMG</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SMG_Bond>1</AMW_Gun_SMG_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SlugRifle_Bond" Abstract="True">
                            <label>bond slug rifle</label>
                            <description>Bond an slug rifle.</description>
                            <jobString>Bonding a slug rifle.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SlugRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SlugRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SlugRifle_Bond>1</AMW_Gun_SlugRifle_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SStalkerRifle_Bond" Abstract="True">
                            <label>bond salvaged stalkers rifle</label>
                            <description>Bond an salvaged stalkers rifle.</description>
                            <jobString>Bonding a salvaged stalkers rifle.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SStalkerRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SStalkerRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SStalkerRifle_Bond>1</AMW_Gun_SStalkerRifle_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_GaussCannon_Bond" Abstract="True">
                            <label>bond gauss cannon</label>
                            <description>Bond an gauss cannon.</description>
                            <jobString>Bonding a gauss cannon.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_GaussCannon</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_GaussCannon</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_GaussCannon_Bond>1</AMW_Gun_GaussCannon_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_HeavyRifle_Bond" Abstract="True">
                            <label>bond heavy rifle</label>
                            <description>Bond an heavy rifle.</description>
                            <jobString>Bonding a heavy rifle.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_HeavyRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_HeavyRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_HeavyRifle_Bond>1</AMW_Gun_HeavyRifle_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_SChargeCannonAWM_Bond" Abstract="True">
                            <label>bond salvaged charge cannon</label>
                            <description>Bond an salvaged charge cannon.</description>
                            <jobString>Bonding a salvaged charge cannon.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_SChargeCannonAWM</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_SChargeCannonAWM</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_SChargeCannonAWM_Bond>1</AMW_Gun_SChargeCannonAWM_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_Gun_GrenadeShotgun_Bond" Abstract="True">
                            <label>bond grenade shotgun</label>
                            <description>Bond an grenade shotgun.</description>
                            <jobString>Bonding a grenade shotgun.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_Gun_GrenadeShotgun</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_Gun_GrenadeShotgun</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_Gun_GrenadeShotgun_Bond>1</AMW_Gun_GrenadeShotgun_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_MechaWeapon_SSeekerKatana_Bond" Abstract="True">
                            <label>bond salvaged energy blade</label>
                            <description>Bond an salvaged energy blade.</description>
                            <jobString>Bonding a salvaged energy blade.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_MechaWeapon_SSeekerKatana</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_MechaWeapon_SSeekerKatana</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_MechaWeapon_SSeekerKatana_Bond>1</AMW_MechaWeapon_SSeekerKatana_Bond>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="MPBFPM_RecipeDefBase" Name="Make_AMW_MechaWeapon_PowerClaw_Bond" Abstract="True">
                            <label>bond power claw</label>
                            <description>Bond an power claw.</description>
                            <jobString>Bonding a power claw.</jobString>
                            <researchPrerequisite>AMW_Salvaged_Mech_Tech</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>AMW_MechaWeapon_PowerClaw</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>AMW_MechaWeapon_PowerClaw</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <AMW_MechaWeapon_PowerClaw_Bond>1</AMW_MechaWeapon_PowerClaw_Bond>
                            </products>
                        </RecipeDef>

                    </value>
                </li>

                <li Class="PatchOperationFindMod">
                    <mods>
                        <li>XML Extensions</li>
                    </mods>

                    <nomatch Class="PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value>
                            <!-- Make_AMW_Gun_SNomadRifle_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SNomadRifle_Bond">
                                <defName>Make_AMW_Gun_SNomadRifle_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_IonPistol_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_IonPistol_Bond">
                                <defName>Make_AMW_Gun_IonPistol_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_SShreder_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SShreder_Bond">
                                <defName>Make_AMW_Gun_SShreder_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_SMG_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SMG_Bond">
                                <defName>Make_AMW_Gun_SMG_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_SlugRifle_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SlugRifle_Bond">
                                <defName>Make_AMW_Gun_SlugRifle_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_SStalkerRifle_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SStalkerRifle_Bond">
                                <defName>Make_AMW_Gun_SStalkerRifle_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_GaussCannon_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_GaussCannon_Bond">
                                <defName>Make_AMW_Gun_GaussCannon_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_HeavyRifle_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_HeavyRifle_Bond">
                                <defName>Make_AMW_Gun_HeavyRifle_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_SChargeCannonAWM_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_SChargeCannonAWM_Bond">
                                <defName>Make_AMW_Gun_SChargeCannonAWM_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_Gun_GrenadeShotgun_Bond -->
                            <RecipeDef ParentName="Make_AMW_Gun_GrenadeShotgun_Bond">
                                <defName>Make_AMW_Gun_GrenadeShotgun_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_MechaWeapon_SSeekerKatana_Bond -->
                            <RecipeDef ParentName="Make_AMW_MechaWeapon_SSeekerKatana_Bond">
                                <defName>Make_AMW_MechaWeapon_SSeekerKatana_Bond</defName>
                            </RecipeDef>

                            <!-- Make_AMW_MechaWeapon_PowerClaw_Bond -->
                            <RecipeDef ParentName="Make_AMW_MechaWeapon_PowerClaw_Bond">
                                <defName>Make_AMW_MechaWeapon_PowerClaw_Bond</defName>
                            </RecipeDef>
                        </value>
                    </nomatch>

                    <match Class="PatchOperationSequence">
                        <operations>
                            <li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
                                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                                <key>Daria40K_MightyPersonaBondForgePatch_RWYAdvancedMechanoidWarfare</key>
                                <defaultValue>true</defaultValue>

                                <caseTrue>
                                    <Operation Class="XmlExtensions.PatchOperationAdd">
                                        <xpath>Defs</xpath>
                                        <value>
                                            <!-- Make_AMW_Gun_SNomadRifle_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SNomadRifle_Bond">
                                                <defName>Make_AMW_Gun_SNomadRifle_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_IonPistol_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_IonPistol_Bond">
                                                <defName>Make_AMW_Gun_IonPistol_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_SShreder_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SShreder_Bond">
                                                <defName>Make_AMW_Gun_SShreder_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_SMG_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SMG_Bond">
                                                <defName>Make_AMW_Gun_SMG_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_SlugRifle_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SlugRifle_Bond">
                                                <defName>Make_AMW_Gun_SlugRifle_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_SStalkerRifle_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SStalkerRifle_Bond">
                                                <defName>Make_AMW_Gun_SStalkerRifle_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_GaussCannon_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_GaussCannon_Bond">
                                                <defName>Make_AMW_Gun_GaussCannon_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_HeavyRifle_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_HeavyRifle_Bond">
                                                <defName>Make_AMW_Gun_HeavyRifle_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_SChargeCannonAWM_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_SChargeCannonAWM_Bond">
                                                <defName>Make_AMW_Gun_SChargeCannonAWM_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_Gun_GrenadeShotgun_Bond -->
                                            <RecipeDef ParentName="Make_AMW_Gun_GrenadeShotgun_Bond">
                                                <defName>Make_AMW_Gun_GrenadeShotgun_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_MechaWeapon_SSeekerKatana_Bond -->
                                            <RecipeDef ParentName="Make_AMW_MechaWeapon_SSeekerKatana_Bond">
                                                <defName>Make_AMW_MechaWeapon_SSeekerKatana_Bond</defName>
                                            </RecipeDef>

                                            <!-- Make_AMW_MechaWeapon_PowerClaw_Bond -->
                                            <RecipeDef ParentName="Make_AMW_MechaWeapon_PowerClaw_Bond">
                                                <defName>Make_AMW_MechaWeapon_PowerClaw_Bond</defName>
                                            </RecipeDef>
                                        </value>
                                    </Operation>
                                </caseTrue>
                            </li>
                        </operations>
                    </match>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>
