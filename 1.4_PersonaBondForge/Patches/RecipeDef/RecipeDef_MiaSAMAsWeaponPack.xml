<?xml version="1.0" encoding="utf-8"?>
<!--
    ===== 米娅·SAMA的武器包重制版 =====
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>米娅·SAMA的武器包重制版</li>
        </mods>

        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs</xpath>
                    <value>
                        <!-- Miya_XM109_SniperRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_XM109_SniperRifle_Bond</defName>
                            <label>bond XM109型狙击步枪</label>
                            <description>Bond an XM109型狙击步枪.</description>
                            <jobString>Bonding a XM109型狙击步枪.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_XM109_SniperRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_XM109_SniperRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_XM109_SniperRifle_Bond>1</Miya_XM109_SniperRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_XM109_SniperRifle_Plus_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_XM109_SniperRifle_Plus_Bond</defName>
                            <label>bond XM109型狙击步枪-电荷改装版</label>
                            <description>Bond an XM109型狙击步枪-电荷改装版.</description>
                            <jobString>Bonding a XM109型狙击步枪-电荷改装版.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_XM109_SniperRifle_Plus</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_XM109_SniperRifle_Plus</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_XM109_SniperRifle_Plus_Bond>1</Miya_XM109_SniperRifle_Plus_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_SVD_SniperRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_SVD_SniperRifle_Bond</defName>
                            <label>bond 英雄之怒SVD-EX</label>
                            <description>Bond an 英雄之怒SVD-EX.</description>
                            <jobString>Bonding a 英雄之怒SVD-EX.</jobString>
                            <researchPrerequisite>PrecisionRifling</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_SVD_SniperRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_SVD_SniperRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_SVD_SniperRifle_Bond>1</Miya_SVD_SniperRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_SVD_SniperRifle_Plus_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_SVD_SniperRifle_Plus_Bond</defName>
                            <label>bond 英雄之怒SVD-EX-电荷改装</label>
                            <description>Bond an 英雄之怒SVD-EX-电荷改装.</description>
                            <jobString>Bonding a 英雄之怒SVD-EX-电荷改装.</jobString>
                            <researchPrerequisite>ChargedShot</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_SVD_SniperRifle_Plus</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_SVD_SniperRifle_Plus</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_SVD_SniperRifle_Plus_Bond>1</Miya_SVD_SniperRifle_Plus_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_BlackGold_Howitzer_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_BlackGold_Howitzer_Bond</defName>
                            <label>bond 黑金榴弹炮</label>
                            <description>Bond an 黑金榴弹炮.</description>
                            <jobString>Bonding a 黑金榴弹炮.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_BlackGold_Howitzer</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_BlackGold_Howitzer</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_BlackGold_Howitzer_Bond>1</Miya_BlackGold_Howitzer_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_BlackGold_Howitzer_Plus_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_BlackGold_Howitzer_Plus_Bond</defName>
                            <label>bond “光环”战术武器系统</label>
                            <description>Bond an “光环”战术武器系统.</description>
                            <jobString>Bonding a “光环”战术武器系统.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_BlackGold_Howitzer_Plus</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_BlackGold_Howitzer_Plus</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_BlackGold_Howitzer_Plus_Bond>1</Miya_BlackGold_Howitzer_Plus_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Mia_Warhammer_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Mia_Warhammer_Bond</defName>
                            <label>bond 西格玛战锤</label>
                            <description>Bond an 西格玛战锤.</description>
                            <jobString>Bonding a 西格玛战锤.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Mia_Warhammer</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Mia_Warhammer</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Mia_Warhammer_Bond>1</Mia_Warhammer_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Mia_WarhammerPsychic_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Mia_WarhammerPsychic_Bond</defName>
                            <label>bond 盖尔·玛拉兹</label>
                            <description>Bond an 盖尔·玛拉兹.</description>
                            <jobString>Bonding a 盖尔·玛拉兹.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Mia_WarhammerPsychic</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Mia_WarhammerPsychic</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Mia_WarhammerPsychic_Bond>1</Mia_WarhammerPsychic_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_DragonDrill_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_DragonDrill_Bond</defName>
                            <label>bond 电光狂龙钻</label>
                            <description>Bond an 电光狂龙钻.</description>
                            <jobString>Bonding a 电光狂龙钻.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_DragonDrill</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_DragonDrill</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_DragonDrill_Bond>1</Miya_DragonDrill_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Miya_LaserRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Miya_LaserRifle_Bond</defName>
                            <label>bond LAR-10 激光步枪</label>
                            <description>Bond an LAR-10 激光步枪.</description>
                            <jobString>Bonding a LAR-10 激光步枪.</jobString>
                            <researchPrerequisite>ChargedShot</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Miya_LaserRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Miya_LaserRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Miya_LaserRifle_Bond>1</Miya_LaserRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Mia_IceSword_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Mia_IceSword_Bond</defName>
                            <label>bond 冰刀</label>
                            <description>Bond an 冰刀.</description>
                            <jobString>Bonding a 冰刀.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Mia_IceSword</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Mia_IceSword</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Mia_IceSword_Bond>1</Mia_IceSword_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Mia_UltraTechSword_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Mia_UltraTechSword_Bond</defName>
                            <label>bond 星际仲裁</label>
                            <description>Bond an 星际仲裁.</description>
                            <jobString>Bonding a 星际仲裁.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Mia_UltraTechSword</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Mia_UltraTechSword</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Mia_UltraTechSword_Bond>1</Mia_UltraTechSword_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Mia_DemonSword_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Mia_DemonSword_Bond</defName>
                            <label>bond 魔剑阿波菲斯</label>
                            <description>Bond an 魔剑阿波菲斯.</description>
                            <jobString>Bonding a 魔剑阿波菲斯.</jobString>
                            <researchPrerequisite>Bound_Research</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Mia_DemonSword</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Mia_DemonSword</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Mia_DemonSword_Bond>1</Mia_DemonSword_Bond>
                            </products>
                        </RecipeDef>
                    </value>
                </li>

                <li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
                    <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                    <key>Daria40K_MightyPersonaBondForgePatch_MiaSAMAsWeaponPack</key>
                    <defaultValue>true</defaultValue>
                    <caseFalse>
                        <!-- Miya_XM109_SniperRifle -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_XM109_SniperRifle_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_XM109_SniperRifle_Plus -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_XM109_SniperRifle_Plus_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_SVD_SniperRifle -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_SVD_SniperRifle_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_SVD_SniperRifle_Plus -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_SVD_SniperRifle_Plus_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_BlackGold_Howitzer -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_BlackGold_Howitzer_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_BlackGold_Howitzer_Plus -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_BlackGold_Howitzer_Plus_Bond"]</xpath>
                        </Operation>
                        <!-- Mia_Warhammer -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Mia_Warhammer_Bond"]</xpath>
                        </Operation>
                        <!-- Mia_WarhammerPsychic -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Mia_WarhammerPsychic_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_DragonDrill -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_DragonDrill_Bond"]</xpath>
                        </Operation>
                        <!-- Miya_LaserRifle -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Miya_LaserRifle_Bond"]</xpath>
                        </Operation>
                        <!-- Mia_IceSword -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Mia_IceSword_Bond"]</xpath>
                        </Operation>
                        <!-- Mia_UltraTechSword -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Mia_UltraTechSword_Bond"]</xpath>
                        </Operation>
                        <!-- Mia_DemonSword -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Mia_DemonSword_Bond"]</xpath>
                        </Operation>
                    </caseFalse>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>