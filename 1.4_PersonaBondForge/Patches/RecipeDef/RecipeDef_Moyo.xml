<?xml version="1.0" encoding="utf-8"?>
<!--
    ===== Moyo-From the depth =====

    == Melee
    Moyo_Wrench_Bond = persona moyo wrench
    Moyo_Knife_Bond = persona moyo diving knife
    Moyo_Piledriver_Bond = persona moyo piledriver
    Moyo_Spear_Bond = persona moyo battleaxe
    Moyo_PowerFist_Bond = persona moyo powerfist
    Moyo_GDSpear_Bond = persona moyo royal battleaxe
    Moyo_GDPowerFist_Bond = persona moyo royal powerfist

    == Range
    Moyo_Pistol_Bond = persona moyo nail gun
    Moyo_ChargeRifle_Bond = persona moyo charge rifle
    Moyo_PrecisionRifle_Bond = persona moyo precision rifle
    Moyo_ChargeSMG_Bond = persona moyo charge SMG
    Moyo_BoltCaster_Bond = persona moyo balista
    Moyo_AutoCannon_Bond = persona moyo autocannon
    Moyo_HeavyChargeRifle_Bond = persona moyo royal charge rifle
    Moyo_HeavyAutoCannon_Bond = persona moyo royal autocannon
    Moyo_HeavyBoltCaster_Bond = persona moyo royal balista
    Moyo_CryoBlaster_Bond = persona moyo cryoblaster
-->
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Moyo-From the depth</li>
        </mods>

        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs</xpath>
                    <value>
                        <!-- ===== Melee ===== -->
                        <!-- Moyo_Wrench_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_Wrench_Bond</defName>
                            <label>bond moyo wrench</label>
                            <description>Bond an moyo wrench.</description>
                            <jobString>Bonding a moyo wrench.</jobString>
                            <researchPrerequisite>Machining</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_Wrench</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_Wrench</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_Wrench_Bond>1</Moyo_Wrench_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_Knife_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_Knife_Bond</defName>
                            <label>bond moyo diving knife</label>
                            <description>Bond an moyo diving knife.</description>
                            <jobString>Bonding a moyo diving knife.</jobString>
                            <researchPrerequisite>Machining</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_Knife</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_Knife</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_Knife_Bond>1</Moyo_Knife_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_Piledriver_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_Piledriver_Bond</defName>
                            <label>bond moyo piledriver</label>
                            <description>Bond an moyo piledriver.</description>
                            <jobString>Bonding a moyo piledriver.</jobString>
                            <researchPrerequisites>
                                <li>LongBlades</li>
                                <li>GasOperation</li>
                            </researchPrerequisites>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_Piledriver</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_Piledriver</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_Piledriver_Bond>1</Moyo_Piledriver_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_Spear_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_Spear_Bond</defName>
                            <label>bond moyo battleaxe</label>
                            <description>Bond an moyo battleaxe.</description>
                            <jobString>Bonding a moyo battleaxe.</jobString>
                            <researchPrerequisite>MoyoCryoBlaster</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_Spear</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_Spear</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_Spear_Bond>1</Moyo_Spear_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_PowerFist_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_PowerFist_Bond</defName>
                            <label>bond moyo powerfist</label>
                            <description>Bond an moyo powerfist.</description>
                            <jobString>Bonding a moyo powerfist.</jobString>
                            <researchPrerequisite>DeepSeaProtection</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_PowerFist</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_PowerFist</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_PowerFist_Bond>1</Moyo_PowerFist_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_GDSpear_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_GDSpear_Bond</defName>
                            <label>bond moyo royal battleaxe</label>
                            <description>Bond an moyo royal battleaxe.</description>
                            <jobString>Bonding a moyo royal battleaxe.</jobString>
                            <researchPrerequisite>GuardianModule</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_GDSpear</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_GDSpear</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_GDSpear_Bond>1</Moyo_GDSpear_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_GDPowerFist_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_GDPowerFist_Bond</defName>
                            <label>bond moyo royal powerfist</label>
                            <description>Bond an moyo royal powerfist.</description>
                            <jobString>Bonding a moyo royal powerfist.</jobString>
                            <researchPrerequisite>GuardianModule</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_GDPowerFist</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_GDPowerFist</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_GDPowerFist_Bond>1</Moyo_GDPowerFist_Bond>
                            </products>
                        </RecipeDef>

                        <!-- ===== Range ===== -->
                        <!-- Moyo_Pistol_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_Pistol_Bond</defName>
                            <label>bond moyo nail gun</label>
                            <description>Bond an moyo nail gun.</description>
                            <jobString>Bonding a moyo nail gun.</jobString>
                            <researchPrerequisite>GasOperation</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_Pistol</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_Pistol</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_Pistol_Bond>1</Moyo_Pistol_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_ChargeRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_ChargeRifle_Bond</defName>
                            <label>bond moyo charge rifle</label>
                            <description>Bond an moyo charge rifle.</description>
                            <jobString>Bonding a moyo charge rifle.</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_ChargeRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_ChargeRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_ChargeRifle_Bond>1</Moyo_ChargeRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_PrecisionRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_PrecisionRifle_Bond</defName>
                            <label>bond moyo precision rifle</label>
                            <description>Bond an moyo precision rifle.</description>
                            <jobString>Bonding a moyo precision rifle.</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_PrecisionRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_PrecisionRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_PrecisionRifle_Bond>1</Moyo_PrecisionRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_ChargeSMG_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_ChargeSMG_Bond</defName>
                            <label>bond moyo charge SMG</label>
                            <description>Bond an moyo charge SMG.</description>
                            <jobString>Bonding a moyo charge SMG.</jobString>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_ChargeSMG</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_ChargeSMG</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_ChargeSMG_Bond>1</Moyo_ChargeSMG_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_BoltCaster_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_BoltCaster_Bond</defName>
                            <label>bond moyo balista</label>
                            <description>Bond an moyo balista.</description>
                            <jobString>Bonding a moyo balista.</jobString>
                            <researchPrerequisite>MoyoChargedBolt</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_BoltCaster</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_BoltCaster</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_BoltCaster_Bond>1</Moyo_BoltCaster_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_AutoCannon_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_AutoCannon_Bond</defName>
                            <label>bond moyo autocannon</label>
                            <description>Bond an moyo autocannon.</description>
                            <jobString>Bonding a moyo autocannon.</jobString>
                            <researchPrerequisite>MoyoChargedBolt</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_AutoCannon</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_AutoCannon</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_AutoCannon_Bond>1</Moyo_AutoCannon_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_HeavyChargeRifle_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_HeavyChargeRifle_Bond</defName>
                            <label>bond moyo royal charge rifle</label>
                            <description>Bond an moyo royal charge rifle.</description>
                            <jobString>Bonding a moyo royal charge rifle.</jobString>
                            <researchPrerequisite>GuardianModule</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_HeavyChargeRifle</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_HeavyChargeRifle</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_HeavyChargeRifle_Bond>1</Moyo_HeavyChargeRifle_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_HeavyAutoCannon_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_HeavyAutoCannon_Bond</defName>
                            <label>bond moyo royal autocannon</label>
                            <description>Bond an moyo royal autocannon.</description>
                            <jobString>Bonding a moyo royal autocannon.</jobString>
                            <researchPrerequisite>GuardianModule</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_HeavyAutoCannon</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_HeavyAutoCannon</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_HeavyAutoCannon_Bond>1</Moyo_HeavyAutoCannon_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_HeavyBoltCaster_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_HeavyBoltCaster_Bond</defName>
                            <label>bond moyo royal balista</label>
                            <description>Bond an moyo royal balista.</description>
                            <jobString>Bonding a moyo royal balista.</jobString>
                            <researchPrerequisite>GuardianModule</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_HeavyBoltCaster</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_HeavyBoltCaster</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_HeavyBoltCaster_Bond>1</Moyo_HeavyBoltCaster_Bond>
                            </products>
                        </RecipeDef>

                        <!-- Moyo_CryoBlaster_Bond -->
                        <RecipeDef ParentName="MPBFPM_RecipeDefBase">
                            <defName>Make_Moyo_CryoBlaster_Bond</defName>
                            <label>bond moyo cryoblaster</label>
                            <description>Bond an moyo cryoblaster.</description>
                            <jobString>Bonding a moyo cryoblaster.</jobString>
                            <researchPrerequisite>MoyoCryoBlaster</researchPrerequisite>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>Moyo_CryoBlaster</li>
                                        </thingDefs>
                                    </filter>
                                    <count>1</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>Moyo_CryoBlaster</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <Moyo_CryoBlaster_Bond>1</Moyo_CryoBlaster_Bond>
                            </products>
                        </RecipeDef>
                    </value>
                </li>

                <li Class="XmlExtensions.OptionalPatch" MayRequire="imranfish.xmlextensions">
                    <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                    <key>Daria40K_MightyPersonaBondForgePatch_MoyoFromthedepth</key>
                    <defaultValue>true</defaultValue>
                    <caseFalse>
                        <!-- Moyo_Wrench_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_Wrench_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_Knife_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_Knife_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_Piledriver_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_Piledriver_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_Spear_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_Spear_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_PowerFist_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_PowerFist_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_GDSpear_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_GDSpear_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_GDPowerFist_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_GDPowerFist_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_Pistol_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_Pistol_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_ChargeRifle_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_ChargeRifle_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_PrecisionRifle_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_PrecisionRifle_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_ChargeSMG_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_ChargeSMG_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_BoltCaster_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_BoltCaster_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_AutoCannon_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_AutoCannon_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_HeavyChargeRifle_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_HeavyChargeRifle_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_HeavyAutoCannon_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_HeavyAutoCannon_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_HeavyBoltCaster_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_HeavyBoltCaster_Bond"]</xpath>
                        </Operation>

                        <!-- Moyo_CryoBlaster_Bond -->
                        <Operation Class="XmlExtensions.PatchOperationRemove">
                            <xpath>Defs/RecipeDef[defName="Make_Moyo_CryoBlaster_Bond"]</xpath>
                        </Operation>
                    </caseFalse>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>
