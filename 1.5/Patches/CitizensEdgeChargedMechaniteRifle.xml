<?xml version="1.0" encoding="utf-8" ?>
<!--
	===== Citizens Edge: Charged Mechanite Rifle =====
-->
<Patch>
	<Operation Class="XmlExtensions.FindMod">
		<mods>
			<li>hotcookies.cedcmr</li>
		</mods>
		<packageId>true</packageId>

		<caseTrue>
			<Operation Class="XmlExtensions.PatchOperationAdd">
				<xpath>Defs</xpath>
				<value><ThingDef ParentName="MPBFPM_BaseGun" Name="CitizensEdge_CMR_S1_Rifle_Bond" Abstract="True">
    <label>persona The CMR-S1 Prototype</label>
    <description>The CMR series rifles are rare and valuable prototypes, deploying mechanite diseases to inflict agony upon enemies. Which renders them more vulnerable to capture but also temporarily boosting their combat prowess. Handle with care, for it is both rare and valuable.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
    <possessionCount>1</possessionCount>
    <graphicData>
      <texPath>Weapons/Citizens_Edge_CMR_S1</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <uiIconScale>1.4</uiIconScale>
    <soundInteract>Interact_ChargeRifle</soundInteract>
    <statBases>
      <Mass>4.6</Mass>
      <MarketValue>3850.0</MarketValue>
      <AccuracyTouch>0.605</AccuracyTouch>
      <AccuracyShort>0.814</AccuracyShort>
      <AccuracyMedium>0.726</AccuracyMedium>
      <AccuracyLong>0.605</AccuracyLong>
      <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
    </statBases>
    <weaponTags>
      <li>SpacerGun</li>
    </weaponTags>
    <tradeTags>
      <li>WeaponRanged</li>
      <li>ExoticMisc</li>
    </tradeTags>
    <weaponClasses>
      <li>RangedLight</li>
    </weaponClasses>
    <tradeability>Sellable</tradeability>
    <verbs>
      <li>
        <verbClass>Verb_Shoot</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>CitizensEdge_SM_Bullet_Bond</defaultProjectile>
        <warmupTime>1.0</warmupTime>
        <range>30</range>
        <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
        <burstShotCount>2</burstShotCount>
        <soundCast>Shot_ChargeRifle</soundCast>
        <soundCastTail>GunTail_Medium</soundCastTail>
        <muzzleFlashScale>9</muzzleFlashScale>
      </li>
    </verbs>
    <tools>
      <li>
        <label>stock</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>9.75</power>
        <cooldownTime>1.7</cooldownTime>
      </li>
      <li>
        <label>barrel</label>
        <capacities>
          <li>Blunt</li>
          <li>Poke</li>
        </capacities>
        <power>9.75</power>
        <cooldownTime>1.7</cooldownTime>
      </li>
    </tools>


  </ThingDef><ThingDef ParentName="MPBFPM_BaseGun" Name="CitizensEdge_CMR_F1_Rifle_Bond" Abstract="True">
    <label>persona The CMR-F1 Prototype</label>
    <description>The CMR series rifles are rare and valuable prototypes, deploying mechanite diseases to inflict agony upon enemies. Which renders them more vulnerable to capture but also temporarily boosting their combat prowess. Handle with care, for it is both rare and valuable.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
    <possessionCount>1</possessionCount>
    <graphicData>
      <texPath>Weapons/Citizens_Edge_CMR_F1</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <uiIconScale>1.4</uiIconScale>
    <soundInteract>Interact_ChargeRifle</soundInteract>
    <statBases>
      <MarketValue>3850.0</MarketValue>
      <Mass>4.6</Mass>
      <AccuracyTouch>0.605</AccuracyTouch>
      <AccuracyShort>0.814</AccuracyShort>
      <AccuracyMedium>0.726</AccuracyMedium>
      <AccuracyLong>0.605</AccuracyLong>
      <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
    </statBases>
    <weaponTags>
      <li>SpacerGun</li>
    </weaponTags>
    <tradeTags>
      <li>WeaponRanged</li>
      <li>ExoticMisc</li>
    </tradeTags>
    <weaponClasses>
      <li>RangedLight</li>
    </weaponClasses>
    <tradeability>Sellable</tradeability>
    <verbs>
      <li>
        <verbClass>Verb_Shoot</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>CitizensEdge_FM_Bullet_Bond</defaultProjectile>
        <warmupTime>1.0</warmupTime>
        <range>30</range>
        <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
        <burstShotCount>2</burstShotCount>
        <soundCast>Shot_ChargeRifle</soundCast>
        <soundCastTail>GunTail_Medium</soundCastTail>
        <muzzleFlashScale>9</muzzleFlashScale>
      </li>
    </verbs>
    <tools>
      <li>
        <label>stock</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>9.75</power>
        <cooldownTime>1.7</cooldownTime>
      </li>
      <li>
        <label>barrel</label>
        <capacities>
          <li>Blunt</li>
          <li>Poke</li>
        </capacities>
        <power>9.75</power>
        <cooldownTime>1.7</cooldownTime>
      </li>
    </tools>


  </ThingDef><ThingDef ParentName="MPBFPM_Bullet" Name="CitizensEdge_SM_Bullet_Bond" Abstract="True">
    <label>Sensory Mechanites Bullet</label>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      </graphicData>
    <projectile>
      <damageDef>Bullet</damageDef>
      <damageAmountBase>15</damageAmountBase>
      <armorPenetrationBase>0.3</armorPenetrationBase>
      <speed>70</speed>
    </projectile>
        <thingClass>CitizensEdge.CitizensEdge_CMR_S1_BulletLogic</thingClass>
    <modExtensions>
    <li Class="CitizensEdge.CitizensEdge_ModExtension_CMR_S1">
        <addHediffChance>0.35</addHediffChance>
        <hediffToAdd>SensoryMechanites</hediffToAdd>
    </li>
        </modExtensions>
  </ThingDef><ThingDef ParentName="MPBFPM_Bullet" Name="CitizensEdge_FM_Bullet_Bond" Abstract="True">
    <label>Sensory Mechanites Bullet</label>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      </graphicData>
    <projectile>
      <damageDef>Bullet</damageDef>
      <damageAmountBase>15</damageAmountBase>
      <armorPenetrationBase>0.3</armorPenetrationBase>
      <speed>70</speed>
    </projectile>
        <thingClass>CitizensEdge.CitizensEdge_CMR_F1_BulletLogic</thingClass>
    <modExtensions>
    <li Class="CitizensEdge.CitizensEdge_ModExtension_CMR_F1">
        <addHediffChance>0.35</addHediffChance>
        <hediffToAdd>FibrousMechanites</hediffToAdd>
    </li>
        </modExtensions>
  </ThingDef></value>
			</Operation>

			<Operation Class="XmlExtensions.OptionalPatch">
				<modId>Daria40K.MightyPersonaBondForgePatch</modId>
				<key>Daria40K_MightyPersonaBondForgePatch_CitizensEdgeChargedMechaniteRifle</key>
				<defaultValue>true</defaultValue>

				<caseTrue>
					<Operation Class="XmlExtensions.PatchOperationAdd">
						<xpath>Defs</xpath>
						<value><ThingDef ParentName="CitizensEdge_CMR_S1_Rifle_Bond"><defName>CitizensEdge_CMR_S1_Rifle_Bond</defName></ThingDef><ThingDef ParentName="CitizensEdge_CMR_F1_Rifle_Bond"><defName>CitizensEdge_CMR_F1_Rifle_Bond</defName></ThingDef><ThingDef ParentName="CitizensEdge_SM_Bullet_Bond"><defName>CitizensEdge_SM_Bullet_Bond</defName></ThingDef><ThingDef ParentName="CitizensEdge_FM_Bullet_Bond"><defName>CitizensEdge_FM_Bullet_Bond</defName></ThingDef></value>
					</Operation>
				</caseTrue>
			</Operation>	  
		</caseTrue>
	</Operation>
</Patch>