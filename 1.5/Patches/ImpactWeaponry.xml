<?xml version="1.0" encoding="utf-8"?>
<!--
	===== Impact Weaponry =====
-->
<Patch>
    <Operation Class="XmlExtensions.FindMod">
        <mods>
            <li>detvisor.impactweaponry</li>
        </mods>
        <packageId>true</packageId>

        <caseTrue>
            <Operation Class="XmlExtensions.PatchOperationAdd">
                <xpath>Defs</xpath>
                <value>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactRifle_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact rifle</label>
                        <description>A compact and deadly spacer tech rifle, specially loaded with impact-tip ammo. Each shot violently explodes once it reaches its target, turning unarmored foes and enemy structures alike into mist. Imperial marines can often be heard shouting warcries to their emperor while shooting down opponents with these weapons.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactRifle</texPath>
                            <drawSize>1.05</drawSize>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_Rifle</soundInteract>
                        <generateCommonality>1.8</generateCommonality>
                        <statBases>
                            <Mass>5.2</Mass>
                            <AccuracyTouch>0.715</AccuracyTouch>
                            <AccuracyShort>0.825</AccuracyShort>
                            <AccuracyMedium>0.55</AccuracyMedium>
                            <AccuracyLong>0.385</AccuracyLong>
                            <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBullet_Bond</defaultProjectile>
                                <warmupTime>1.2</warmupTime>
                                <range>24</range>
                                <forcedMissRadius>0.06</forcedMissRadius>
                                <burstShotCount>5</burstShotCount>
                                <ticksBetweenBurstShots>14</ticksBetweenBurstShots>
                                <soundCast>Shot_ImpactRifle</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>handle</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>barrel</label>
                                <capacities>
                                    <li>Blunt</li>
                                    <li>Poke</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef MayRequire="smartkar.athenaframework" ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactSlugger_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact slugger</label>
                        <description>A sizable shotgun designed to fire a spread of explosive impact-tip shells. Its capability to clear an area with multiple explosions paired with its limited range makes it ideal for close quarters combat. Cataphracts employ these for drop pod raids in tandem with their heavy armor to devastating effect.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactSlugger</texPath>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_ChargeRifle</soundInteract>
                        <generateCommonality>0</generateCommonality>
                        <statBases>
                            <Mass>5.6</Mass>
                            <AccuracyTouch>0.968</AccuracyTouch>
                            <AccuracyShort>0.792</AccuracyShort>
                            <AccuracyMedium>0.616</AccuracyMedium>
                            <AccuracyLong>0.495</AccuracyLong>
                            <RangedWeapon_Cooldown>2.55</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>AthenaFramework.Verb_ShootAngularShotgun</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBulletSlugger_Bond</defaultProjectile>
                                <warmupTime>1.4</warmupTime>
                                <range>22</range>
                                <forcedMissRadius>0.1</forcedMissRadius>
                                <soundCast>Shot_ImpactSlugger</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>stock</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>2.125</cooldownTime>
                            </li>
                            <li>
                                <label>front</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>2.125</cooldownTime>
                            </li>
                        </tools>
                        <modExtensions>
                            <li Class="AthenaFramework.AngularShotgunExtension">
                                <pelletCount>4</pelletCount>
                                <pelletAngle>3</pelletAngle>
                            </li>
                        </modExtensions>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactStubber_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact stubber</label>
                        <description>Essentially a shrunk down version of the impact rifle, the impact stubber is a small and bulky sidearm, loaded with impact-tip ammo that explodes on target. The stubber is commonly used by imperial soldiers for it's portability and power.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactStubber</texPath>
                            <drawSize>1.05</drawSize>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_Revolver</soundInteract>
                        <generateCommonality>1.4</generateCommonality>
                        <statBases>
                            <Mass>4.2</Mass>
                            <AccuracyTouch>0.715</AccuracyTouch>
                            <AccuracyShort>0.825</AccuracyShort>
                            <AccuracyMedium>0.495</AccuracyMedium>
                            <AccuracyLong>0.33</AccuracyLong>
                            <RangedWeapon_Cooldown>1.02</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedLight</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBullet_Bond</defaultProjectile>
                                <warmupTime>1.0</warmupTime>
                                <range>22.6</range>
                                <forcedMissRadius>0.06</forcedMissRadius>
                                <soundCast>Shot_ImpactSmall</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>6</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>handle</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>front</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactCannon_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact cannon</label>
                        <description>A large and terrifying handheld cannon designed to fire bursts of explosive impact-tip shells, making it ideal for destroying enemy fortifications. While it has a slow firing rate, its long range makes it favored by imperial bombardiers for elimiating both rebel outposts and the occasional skull.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <equippedAngleOffset>45</equippedAngleOffset>
                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactCannon</texPath>
                            <drawSize>1.35</drawSize>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_ChargeRifle</soundInteract>
                        <generateCommonality>0.3</generateCommonality>
                        <statBases>
                            <Mass>6.6</Mass>
                            <AccuracyTouch>0.66</AccuracyTouch>
                            <AccuracyShort>0.77</AccuracyShort>
                            <AccuracyMedium>0.605</AccuracyMedium>
                            <AccuracyLong>0.44</AccuracyLong>
                            <RangedWeapon_Cooldown>1.87</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBulletBig_Bond</defaultProjectile>
                                <warmupTime>1.6</warmupTime>
                                <range>30</range>
                                <forcedMissRadius>0.1</forcedMissRadius>
                                <burstShotCount>3</burstShotCount>
                                <ticksBetweenBurstShots>38</ticksBetweenBurstShots>
                                <soundCast>Shot_ImpactCannon</soundCast>
                                <soundCastTail>GunTail_Heavy</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>barrel</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>bar</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactSlinger_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact Slinger</label>
                        <description>A powerful shoulder-fired mortar engineered to fire large impact-tip shells at enemy targets. The built-in revolving magazine allows the user to fire off a devastating four-burst shot; perfect for leveling structures and armies alike. This destructive versatility makes it the preferred weapon for imperial breaching battalions, and even the bravest rebels have come to fear the shrieking whistles the shells make as they soar though the air.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>


                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactSlinger</texPath>
                            <drawSize>1.25</drawSize>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_ChargeRifle</soundInteract>
                        <generateCommonality>0.3</generateCommonality>
                        <statBases>
                            <Mass>5.7</Mass>
                            <AccuracyTouch>0.66</AccuracyTouch>
                            <AccuracyShort>0.715</AccuracyShort>
                            <AccuracyMedium>0.55</AccuracyMedium>
                            <AccuracyLong>0.495</AccuracyLong>
                            <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBulletShell_Bond</defaultProjectile>
                                <warmupTime>1.4</warmupTime>
                                <range>28</range>
                                <forcedMissRadius>0.1</forcedMissRadius>
                                <burstShotCount>4</burstShotCount>
                                <ticksBetweenBurstShots>23</ticksBetweenBurstShots>
                                <soundCast>Shot_ImpactRifle</soundCast>
                                <soundCastTail>GunTail_Heavy</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>front</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>grip</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_ImpactSniper_Bond" Abstract="True">
                        <techLevel>Spacer</techLevel>
                        <label>persona impact sniper</label>
                        <description>A heavy sniper rifle designed to fire explosive impact tip shells. It boasts a massive range of fire and high accuracy due to the extended barrel and powerful sights. These are employed by imperial snipers to eliminate targets without heavily damaging important structures, such as a captured base.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <equippedAngleOffset>45</equippedAngleOffset>
                        <graphicData>
                            <texPath>Things/WeaponRanged/ImpactSniper</texPath>
                            <drawSize>1.20</drawSize>
                            <graphicClass>Graphic_Single</graphicClass>
                            <onGroundRandomRotateAngle>35</onGroundRandomRotateAngle>
                        </graphicData>
                        <soundInteract>Interact_ChargeRifle</soundInteract>
                        <generateCommonality>0.2</generateCommonality>
                        <statBases>
                            <Mass>5.6</Mass>
                            <AccuracyTouch>0.495</AccuracyTouch>
                            <AccuracyShort>0.792</AccuracyShort>
                            <AccuracyMedium>0.891</AccuracyMedium>
                            <AccuracyLong>0.979</AccuracyLong>
                            <RangedWeapon_Cooldown>2.55</RangedWeapon_Cooldown>
                        </statBases>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>ImpactBulletSniper_Bond</defaultProjectile>
                                <warmupTime>2.8</warmupTime>
                                <range>48</range>
                                <forcedMissRadius>0.1</forcedMissRadius>
                                <soundCast>Shot_ImpactSniper</soundCast>
                                <soundCastTail>GunTail_Heavy</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>barrel</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>stock</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef Name="ImpactBullet_Bond" Abstract="True" ParentName="MPBFPM_BaseBullet">
                        <label>Impact bullet</label>
                        <thingClass>Projectile_Explosive</thingClass>
                        <category>Projectile</category>
                        <tickerType>Normal</tickerType>
                        <altitudeLayer>Projectile</altitudeLayer>
                        <useHitPoints>False</useHitPoints>
                        <graphicData>
                            <texPath>Things/ImpactBullet</texPath>
                            <shaderType>TransparentPostLight</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_BombImpact</damageDef>
                            <explosionRadius>0.6</explosionRadius>
                            <damageAmountBase>18</damageAmountBase>
                            <speed>55</speed>
                        </projectile>
                    </ThingDef>
                    <ThingDef Name="ImpactBulletBig_Bond" Abstract="True" ParentName="MPBFPM_BaseBullet">
                        <label>large impact bullet</label>
                        <thingClass>Projectile_Explosive</thingClass>
                        <category>Projectile</category>
                        <tickerType>Normal</tickerType>
                        <altitudeLayer>Projectile</altitudeLayer>
                        <useHitPoints>False</useHitPoints>
                        <graphicData>
                            <texPath>Things/ImpactBulletBig</texPath>
                            <shaderType>TransparentPostLight</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_BombImpact</damageDef>
                            <explosionRadius>1.5</explosionRadius>
                            <damageAmountBase>14</damageAmountBase>
                            <speed>51</speed>
                        </projectile>
                    </ThingDef>
                    <ThingDef Name="ImpactBulletShell_Bond" Abstract="True" ParentName="MPBFPM_BaseBullet">
                        <label>impact shell</label>
                        <thingClass>Projectile_Explosive</thingClass>
                        <category>Projectile</category>
                        <tickerType>Normal</tickerType>
                        <altitudeLayer>Projectile</altitudeLayer>
                        <useHitPoints>False</useHitPoints>
                        <graphicData>
                            <texPath>Things/ImpactBulletShell</texPath>
                            <shaderType>TransparentPostLight</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_BombImpact</damageDef>
                            <explosionRadius>2.2</explosionRadius>
                            <damageAmountBase>15</damageAmountBase>
                            <speed>42</speed>
                        </projectile>
                    </ThingDef>
                    <ThingDef Name="ImpactBulletSniper_Bond" Abstract="True" ParentName="MPBFPM_BaseBullet">
                        <label>impact sniper shell</label>
                        <thingClass>Projectile_Explosive</thingClass>
                        <category>Projectile</category>
                        <tickerType>Normal</tickerType>
                        <altitudeLayer>Projectile</altitudeLayer>
                        <useHitPoints>False</useHitPoints>
                        <graphicData>
                            <texPath>Things/ImpactBulletSniper</texPath>
                            <shaderType>TransparentPostLight</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_BombImpact</damageDef>
                            <explosionRadius>1.6</explosionRadius>
                            <damageAmountBase>20</damageAmountBase>
                            <speed>53</speed>
                        </projectile>
                    </ThingDef>
                    <ThingDef Name="ImpactBulletSlugger_Bond" Abstract="True" ParentName="MPBFPM_BaseBullet">
                        <label>Impact slug</label>
                        <thingClass>Projectile_Explosive</thingClass>
                        <category>Projectile</category>
                        <tickerType>Normal</tickerType>
                        <altitudeLayer>Projectile</altitudeLayer>
                        <useHitPoints>False</useHitPoints>
                        <graphicData>
                            <texPath>Things/ImpactBulletSlugger</texPath>
                            <shaderType>TransparentPostLight</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_BombImpact</damageDef>
                            <explosionRadius>0.4</explosionRadius>
                            <damageAmountBase>14</damageAmountBase>
                            <speed>48</speed>
                        </projectile>
                    </ThingDef>
                </value>
            </Operation>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                <key>Daria40K_MightyPersonaBondForgePatch_ImpactWeaponry</key>
                <defaultValue>true</defaultValue>

                <caseTrue>
                    <Operation Class="XmlExtensions.PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value>
                            <ThingDef ParentName="DV_ImpactRifle_Bond">
                                <defName>DV_ImpactRifle_Bond</defName>
                            </ThingDef>
                            <ThingDef MayRequire="smartkar.athenaframework" ParentName="DV_ImpactSlugger_Bond">
                                <defName>DV_ImpactSlugger_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_ImpactStubber_Bond">
                                <defName>DV_ImpactStubber_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_ImpactCannon_Bond">
                                <defName>DV_ImpactCannon_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_ImpactSlinger_Bond">
                                <defName>DV_ImpactSlinger_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_ImpactSniper_Bond">
                                <defName>DV_ImpactSniper_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="ImpactBullet_Bond">
                                <defName>ImpactBullet_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="ImpactBulletBig_Bond">
                                <defName>ImpactBulletBig_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="ImpactBulletShell_Bond">
                                <defName>ImpactBulletShell_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="ImpactBulletSniper_Bond">
                                <defName>ImpactBulletSniper_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="ImpactBulletSlugger_Bond">
                                <defName>ImpactBulletSlugger_Bond</defName>
                            </ThingDef>
                        </value>
                    </Operation>
                </caseTrue>
            </Operation>

            <Operation Class="XmlExtensions.FindMod">
                <mods>
                    <li>oskarpotocki.vfe.pirates</li>
                </mods>
                <packageId>true</packageId>

                <caseTrue>
                    <Operation Class="XmlExtensions.PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value>
                            <ThingDef ParentName="MPBFPM_VFEP_BaseWarcasketGun" Name="DV_WarcasketGun_ImpactBolter_Bond" Abstract="True">
                                <label>persona warcasket impact bolter</label>
                                <description>An upscaled version of the impact rifle designed for use by a warcasket. Compared to its predecessor, it fires out a larger spray of impact-tip shells at the cost of being significantly bulkier and slower to fire. The impact tech itself was originally of imperial make, but pirate scrappers have reverse engineered and adjusted scavenged impact guns to create this imposing weapon.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                                <graphicData>
                                    <texPath>Things/WeaponRanged/ImpactBolter</texPath>
                                </graphicData>
                                <soundInteract>Interact_Rifle</soundInteract>
                                <statBases>
                                    <Mass>59</Mass>
                                    <AccuracyTouch>0.638</AccuracyTouch>
                                    <AccuracyShort>0.649</AccuracyShort>
                                    <AccuracyMedium>0.682</AccuracyMedium>
                                    <AccuracyLong>0.737</AccuracyLong>
                                    <RangedWeapon_Cooldown>2.38</RangedWeapon_Cooldown>
                                </statBases>
                                <weaponTags>
                                    <li>WarcasketBasic</li>
                                    <li>WarcasketVeteran</li>
                                </weaponTags>
                                <verbs>
                                    <li>
                                        <verbClass>Verb_Shoot</verbClass>
                                        <hasStandardCommand>true</hasStandardCommand>
                                        <defaultProjectile>DV_ImpactBulletBolter_Bond</defaultProjectile>
                                        <warmupTime>1.5</warmupTime>
                                        <range>30</range>
                                        <forcedMissRadius>0.5</forcedMissRadius>
                                        <ticksBetweenBurstShots>21</ticksBetweenBurstShots>
                                        <burstShotCount>5</burstShotCount>
                                        <soundCast>Shot_Autocannon</soundCast>
                                        <soundCastTail>GunTail_Heavy</soundCastTail>
                                        <muzzleFlashScale>9</muzzleFlashScale>
                                    </li>
                                </verbs>
                                <tools>
                                    <li>
                                        <label>handle</label>
                                        <capacities>
                                            <li>Blunt</li>
                                        </capacities>
                                        <power>11.829</power>
                                        <cooldownTime>2.55</cooldownTime>
                                    </li>
                                    <li>
                                        <label>front</label>
                                        <capacities>
                                            <li>Blunt</li>
                                        </capacities>
                                        <power>9.75</power>
                                        <cooldownTime>2.55</cooldownTime>
                                    </li>
                                </tools>
                                <modExtensions>
                                    <li Class="VFECore.FloorGraphicExtension">
                                        <graphicData>
                                            <graphicClass>Graphic_Single</graphicClass>
                                            <texPath>Things/WeaponBoxed/ImpactBolter_OnFloor</texPath>
                                            <onGroundRandomRotateAngle>0</onGroundRandomRotateAngle>
                                            <drawSize>1</drawSize>
                                        </graphicData>
                                    </li>
                                </modExtensions>
                            </ThingDef>
                            <ThingDef ParentName="MPBFPM_BaseBullet" Name="DV_ImpactBulletBolter_Bond" Abstract="True">
                                <label>impact bolter shell</label>
                                <thingClass>Projectile_Explosive</thingClass>
                                <category>Projectile</category>
                                <tickerType>Normal</tickerType>
                                <altitudeLayer>Projectile</altitudeLayer>
                                <useHitPoints>False</useHitPoints>
                                <graphicData>
                                    <texPath>Things/ImpactBolterShell</texPath>
                                </graphicData>
                                <projectile>
                                    <damageDef>Bomb</damageDef>
                                    <explosionRadius>1.8</explosionRadius>
                                    <damageAmountBase>23</damageAmountBase>
                                    <speed>48</speed>
                                </projectile>
                            </ThingDef>
                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.OptionalPatch">
                        <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                        <key>Daria40K_MightyPersonaBondForgePatch_ImpactWeaponry</key>
                        <defaultValue>true</defaultValue>

                        <caseTrue>
                            <Operation Class="XmlExtensions.OptionalPatch">
                                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                                <key>Daria40K_MightyPersonaBondForgePatch_VanillaFactionsExpandedPirates</key>
                                <defaultValue>true</defaultValue>

                                <caseTrue>
                                    <Operation Class="XmlExtensions.PatchOperationAdd">
                                        <xpath>Defs</xpath>
                                        <value>
                                            <ThingDef ParentName="DV_WarcasketGun_ImpactBolter_Bond">
                                                <defName>DV_WarcasketGun_ImpactBolter_Bond</defName>
                                            </ThingDef>
                                            <ThingDef ParentName="DV_ImpactBulletBolter_Bond">
                                                <defName>DV_ImpactBulletBolter_Bond</defName>
                                            </ThingDef>
                                        </value>
                                    </Operation>
                                </caseTrue>
                            </Operation>
                        </caseTrue>
                    </Operation>
                </caseTrue>
            </Operation>
        </caseTrue>
    </Operation>
</Patch>