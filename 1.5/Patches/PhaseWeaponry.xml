<?xml version="1.0" encoding="utf-8"?>
<!--
	===== Phase Weaponry =====
-->
<Patch>
    <Operation Class="XmlExtensions.FindMod">
        <mods>
            <li>det.phaseweaponry</li>
        </mods>
        <packageId>true</packageId>

        <caseTrue>
            <Operation Class="XmlExtensions.PatchOperationAdd">
                <xpath>Defs</xpath>
                <value>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_Gun_PhasePistol_Bond" Abstract="True">
                        <label>persona phase shank</label>
                        <description>A sidearm that boasts great cutting power. Built for tight spaces, its phase-cycle wheel condenses bursts of energy into sharp blades that can break intermolecular bonds. This combination of portability and penetrative power make it perfect for salvage operations, demolition, and carpentry. It also lends itself well to sieges and terror attacks, however, making it the preferred weapon of frontier crazies resourceful enough to get it.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <techLevel>Spacer</techLevel>
                        <graphicData>
                            <texPath>Things/Item/Equipment/WeaponRanged/PhaseGrinder</texPath>
                            <graphicClass>AthenaFramework.Graphic_CooldownWeapon</graphicClass>
                        </graphicData>
                        <soundInteract>PhaseGun_Pickup</soundInteract>
                        <statBases>
                            <Mass>8.2</Mass>
                            <AccuracyTouch>0.638</AccuracyTouch>
                            <AccuracyShort>0.748</AccuracyShort>
                            <AccuracyMedium>0.627</AccuracyMedium>
                            <AccuracyLong>0.44</AccuracyLong>
                            <RangedWeapon_Cooldown>1.785</RangedWeapon_Cooldown>
                        </statBases>
                        <generateCommonality>0.2</generateCommonality>
                        <weaponTags>
                            <li>StrangerWeapon</li>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>Ranged</li>
                            <li>RangedLight</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>DV_Bullet_PhaseBlade_Bond</defaultProjectile>
                                <warmupTime>0.5</warmupTime>
                                <range>24.9</range>
                                <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
                                <burstShotCount>1</burstShotCount>
                                <soundCast>DV_Shot_Phasegun</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>phase-cycler</label>
                                <capacities>
                                    <li>Cut</li>
                                </capacities>
                                <power>12.866</power>
                                <cooldownTime>1.785</cooldownTime>
                            </li>
                            <li>
                                <label>handle</label>
                                <capacities>
                                    <li>Blunt</li>
                                    <li>Poke</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>housing</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_Gun_PhaseRifle_Bond" Abstract="True">
                        <label>persona phase saw</label>
                        <description>A rifle boasting immense cutting power that can penetrate solid material. Adapted from an industrial design, which uses a bulky capacitor to power its rapid bursts, the weapon&#8217;s phase-cycle wheel compresses energy into blades that can sever intermolecular bonds. Its original purpose was to cleanly quarry mineral-dense asteroids; now, in the hands of bloodthirsty psychos on the rim, it cleaves through armor, flesh, and bone with ease.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <techLevel>Spacer</techLevel>
                        <graphicData>
                            <texPath>Things/Item/Equipment/WeaponRanged/PhaseSaw</texPath>
                            <graphicClass>AthenaFramework.Graphic_CooldownWeapon</graphicClass>
                        </graphicData>
                        <soundInteract>PhaseGun_Pickup</soundInteract>
                        <statBases>
                            <Mass>12.2</Mass>
                            <AccuracyTouch>0.649</AccuracyTouch>
                            <AccuracyShort>0.77</AccuracyShort>
                            <AccuracyMedium>0.66</AccuracyMedium>
                            <AccuracyLong>0.616</AccuracyLong>
                            <RangedWeapon_Cooldown>2.295</RangedWeapon_Cooldown>
                        </statBases>
                        <generateCommonality>0.1</generateCommonality>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>Ranged</li>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>DV_Bullet_PhaseBlade_Bond</defaultProjectile>
                                <warmupTime>1.5</warmupTime>
                                <range>28.9</range>
                                <ticksBetweenBurstShots>10</ticksBetweenBurstShots>
                                <burstShotCount>3</burstShotCount>
                                <soundCast>DV_Shot_Phasegun</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>phase-cycler</label>
                                <capacities>
                                    <li>Cut</li>
                                </capacities>
                                <power>11.829</power>
                                <cooldownTime>1.785</cooldownTime>
                            </li>
                            <li>
                                <label>stock</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>housing</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseHumanMakeableGun" Name="DV_Gun_PhasePrecisionRifle_Bond" Abstract="True">
                        <label>persona phase scalpel</label>
                        <description>A precision rifle that projects immense cutting power. Its phase-cycle wheel focuses energy into a singular micro-blade, making it perfect for its original role in precision manufacturing. Such accuracy and power has been exploited by mercenaries and assassins to wreak havoc across the galaxy, from spacer societies to rimworld colonies.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
                        <techLevel>Spacer</techLevel>
                        <graphicData>
                            <texPath>Things/Item/Equipment/WeaponRanged/PhaseScalpel</texPath>
                            <graphicClass>AthenaFramework.Graphic_CooldownWeapon</graphicClass>
                            <drawSize>1.06</drawSize>
                        </graphicData>
                        <soundInteract>PhaseGun_Pickup</soundInteract>
                        <statBases>
                            <Mass>16</Mass>
                            <AccuracyTouch>0.605</AccuracyTouch>
                            <AccuracyShort>0.704</AccuracyShort>
                            <AccuracyMedium>0.649</AccuracyMedium>
                            <AccuracyLong>0.693</AccuracyLong>
                            <RangedWeapon_Cooldown>1.955</RangedWeapon_Cooldown>
                        </statBases>
                        <generateCommonality>0.08</generateCommonality>
                        <weaponTags>
                            <li>SpacerGun</li>
                        </weaponTags>
                        <tradeTags>
                            <li>WeaponRanged</li>
                        </tradeTags>
                        <weaponClasses>
                            <li>Ranged</li>
                            <li>RangedHeavy</li>
                        </weaponClasses>
                        <verbs>
                            <li>
                                <verbClass>Verb_Shoot</verbClass>
                                <hasStandardCommand>true</hasStandardCommand>
                                <defaultProjectile>DV_Bullet_PhaseBladeLong_Bond</defaultProjectile>
                                <warmupTime>1.9</warmupTime>
                                <range>34.9</range>
                                <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
                                <burstShotCount>1</burstShotCount>
                                <soundCast>DV_Shot_Phasegun</soundCast>
                                <soundCastTail>GunTail_Medium</soundCastTail>
                                <muzzleFlashScale>9</muzzleFlashScale>
                            </li>
                        </verbs>
                        <tools>
                            <li>
                                <label>phase-cycler</label>
                                <capacities>
                                    <li>Cut</li>
                                </capacities>
                                <power>11.829</power>
                                <cooldownTime>1.785</cooldownTime>
                            </li>
                            <li>
                                <label>stock</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                            <li>
                                <label>housing</label>
                                <capacities>
                                    <li>Blunt</li>
                                </capacities>
                                <power>9.75</power>
                                <cooldownTime>1.7</cooldownTime>
                            </li>
                        </tools>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseBullet" Name="DV_Bullet_PhaseBlade_Bond" Abstract="True">
                        <label>energy blade</label>
                        <graphicData>
                            <texPath>Things/Projectiles/Proj_EnergyBlade</texPath>
                            <shaderType>MoteGlow</shaderType>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_PhaseCut</damageDef>
                            <damageAmountBase>22</damageAmountBase>
                            <armorPenetrationBase>0.55</armorPenetrationBase>
                            <speed>62</speed>
                        </projectile>
                    </ThingDef>
                    <ThingDef ParentName="MPBFPM_BaseBullet" Name="DV_Bullet_PhaseBladeLong_Bond" Abstract="True">
                        <label>energy blade</label>
                        <graphicData>
                            <texPath>Things/Projectiles/Proj_EnergyBladeLong</texPath>
                            <shaderType>MoteGlow</shaderType>
                            <drawSize>1.06</drawSize>
                        </graphicData>
                        <projectile>
                            <damageDef>DV_PhaseCut</damageDef>
                            <damageAmountBase>24</damageAmountBase>
                            <armorPenetrationBase>0.64</armorPenetrationBase>
                            <speed>69</speed>
                        </projectile>
                    </ThingDef>
                </value>
            </Operation>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                <key>Daria40K_MightyPersonaBondForgePatch_PhaseWeaponry</key>
                <defaultValue>true</defaultValue>

                <caseTrue>
                    <Operation Class="XmlExtensions.PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value>
                            <ThingDef ParentName="DV_Gun_PhasePistol_Bond">
                                <defName>DV_Gun_PhasePistol_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_Gun_PhaseRifle_Bond">
                                <defName>DV_Gun_PhaseRifle_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_Gun_PhasePrecisionRifle_Bond">
                                <defName>DV_Gun_PhasePrecisionRifle_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_Bullet_PhaseBlade_Bond">
                                <defName>DV_Bullet_PhaseBlade_Bond</defName>
                            </ThingDef>
                            <ThingDef ParentName="DV_Bullet_PhaseBladeLong_Bond">
                                <defName>DV_Bullet_PhaseBladeLong_Bond</defName>
                            </ThingDef>
                        </value>
                    </Operation>
                </caseTrue>
            </Operation>
        </caseTrue>
    </Operation>
</Patch>