<?xml version="1.0" encoding="utf-8" ?>
<!--
    ===== GravTech =====
-->
<Patch>
    <Operation Class="XmlExtensions.FindMod">
        <mods>
            <li>als.gravtech</li>
        </mods>
        <packageId>true</packageId>
        <caseTrue>
            <Operation Class="XmlExtensions.PatchOperationAdd">
                <xpath>Defs</xpath>
                <value><ThingDef Name="GravBlaster_Bond" ParentName="MPBFPM_BaseHumanMakeableGun" Abstract="True">
        <label>persona grav blaster</label>
        <description>A heavy weapon that launches gravity charges with large area of damage. Ignores
            armor and shields.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
        <graphicData>
            <texPath>Item/GravBlaster</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <soundInteract>Interact_Rifle</soundInteract>
        <generateCommonality>0.3</generateCommonality>
        <!-- <equippedAngleOffset>-30</equippedAngleOffset> -->
        <techLevel>Ultra</techLevel>
        <weaponClasses>
            <li>RangedHeavy</li>
            <li>Ultratech</li>
        </weaponClasses>
        <weaponTags>
            <li>GunHeavy</li>
        </weaponTags>
        <equippedStatOffsets>
            <MoveSpeed>-0.15</MoveSpeed>
        </equippedStatOffsets>
        <statBases>
            <MarketValue>3960.0</MarketValue>
            <Mass>7</Mass>
            <AccuracyTouch>0.605</AccuracyTouch>
            <AccuracyShort>0.66</AccuracyShort>
            <AccuracyMedium>0.77</AccuracyMedium>
            <AccuracyLong>0.715</AccuracyLong>
            <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
            <Flammability>0.1</Flammability>
        </statBases>
        <!-- <comps>
      <li Class="CompProperties_Biocodable"/>
    </comps> -->
        <verbs>
            <li>
                <verbClass>Verb_Shoot</verbClass>
                <hasStandardCommand>true</hasStandardCommand>
                <defaultProjectile>Bullet_GravBlast_Bond</defaultProjectile>
                <warmupTime>2</warmupTime>
                <range>41.9</range>
                <minRange>10</minRange>
                <forcedMissRadius>2</forcedMissRadius>
                <burstShotCount>5</burstShotCount>
                <ticksBetweenBurstShots>20</ticksBetweenBurstShots>
                <soundCast>Ability_CallMechanoids</soundCast>
                <soundCastTail>GunTail_Medium</soundCastTail>
                <muzzleFlashScale>10</muzzleFlashScale>
                <aimingChargeMote>Mote_GravBlaster_Charge</aimingChargeMote>
                <aimingChargeMoteOffset>0.9</aimingChargeMoteOffset>
                <targetParams>
                    <canTargetLocations>true</canTargetLocations>
                </targetParams>
            </li>
        </verbs>
        <tools>
            <li>
                <label>barrel</label>
                <capacities>
                    <li>Blunt</li>
                </capacities>
                <power>12.866</power>
                <cooldownTime>1.7</cooldownTime>
            </li>
        </tools>
        <tradeability>None</tradeability>
        <allowedArchonexusCount>1</allowedArchonexusCount>
    </ThingDef><ThingDef Name="GravBeamCannon_Bond" ParentName="MPBFPM_BaseHumanMakeableGun" Abstract="True">
    <label>persona grav beam cannon</label>
    <description>A heavy weapon that emits a beam of concentrated gravity waves that cause micro
      rips in area. Wounds from the beam do not cause severe bleeding, but they do cause very severe
      pain.\n\nBody parts damaged by the beam reduce the target's armor and increase taken
      damage.\nCan place a decelerating barricade on the ground.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
    <graphicData>
      <texPath>Item/GravBeamCannon</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <!-- <drawSize>0.95</drawSize> -->
    </graphicData>
    <soundInteract>Interact_Rifle</soundInteract>
    <generateCommonality>0.3</generateCommonality>
    <techLevel>Ultra</techLevel>
    <weaponClasses>
      <li>RangedHeavy</li>
      <li>Ultratech</li>
    </weaponClasses>
    <weaponTags>
      <li>GunHeavy</li>
      <li>BeamGraserGun</li>
    </weaponTags>
    <equippedStatOffsets>
      <MoveSpeed>-0.15</MoveSpeed>
    </equippedStatOffsets>
    <statBases>
      <MarketValue>3850.0</MarketValue>
      <Mass>7</Mass>
      <AccuracyTouch>0.715</AccuracyTouch>
      <AccuracyShort>0.77</AccuracyShort>
      <AccuracyMedium>0.88</AccuracyMedium>
      <AccuracyLong>0.825</AccuracyLong>
      <RangedWeapon_Cooldown>0.425</RangedWeapon_Cooldown>
      <Flammability>0.1</Flammability>
    </statBases>
    <comps>
      <li Class="CompProperties_EquippableAbilityReloadable">
        <abilityDef>GravBarrierAbi</abilityDef>
        <maxCharges>4</maxCharges>
        <soundReload>Standard_Reload</soundReload>
        <chargeNoun>barrier charges</chargeNoun>
        <ammoDef>GravlitePanel</ammoDef>
        <ammoCountPerCharge>4</ammoCountPerCharge>
        <baseReloadTicks>60</baseReloadTicks>
      </li>
      <li Class="CompProperties_Styleable"/>
      <li Class="CompProperties_Art">
        <nameMaker>NamerArtWeaponGun</nameMaker>
        <descriptionMaker>ArtDescription_WeaponGun</descriptionMaker>
        <minQualityForArtistic>Excellent</minQualityForArtistic>
      </li>
    </comps>
    <verbs>
      <li>
        <verbClass>Verb_ShootBeam</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <warmupTime>0.5</warmupTime>
        <range>27.9</range>
        <minRange>2.4</minRange>
        <beamTotalDamage>20</beamTotalDamage>
        <beamFullWidthRange>4</beamFullWidthRange>
        <burstShotCount>4</burstShotCount>
        <showBurstShotStats>false</showBurstShotStats>
        <beamWidth>3</beamWidth>
        <ticksBetweenBurstShots>7</ticksBetweenBurstShots>
        <beamDamageDef>GravBeam</beamDamageDef>
        <soundCastTail>GunTail_Medium</soundCastTail>
        <muzzleFlashScale>9</muzzleFlashScale>
        <soundCastBeam>GravBeamCannon_Shooting</soundCastBeam>
        <beamGroundFleckDef>Fleck_GravBeamCrack</beamGroundFleckDef>
        <beamFleckChancePerTick>0.3</beamFleckChancePerTick>
        <beamMaxDeviation>0.4</beamMaxDeviation>
        <beamCurvature>0.2</beamCurvature>
        <beamMoteDef>Mote_GravBeamBase</beamMoteDef>
        <!-- <beamEndEffecterDef>GraserBeam_End</beamEndEffecterDef> -->
        <beamLineFleckDef>Fleck_GravBeamSpark</beamLineFleckDef>
        <beamStartOffset>0.7</beamStartOffset>
        <beamHitsNeighborCells>true</beamHitsNeighborCells>
        <targetParams>
          <canTargetLocations>true</canTargetLocations>
        </targetParams>
        <beamLineFleckChanceCurve>
          <points>
            <li>(0, 0)</li>
            <li>(0.7, 0.3)</li>
            <li>(1, 1.3)</li>
          </points>
        </beamLineFleckChanceCurve>
      </li>
    </verbs>
    <tools>
      <li>
        <label>emitter</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>10.791</power>
        <cooldownTime>1.785</cooldownTime>
        <extraMeleeDamages>
          <li>
            <def>GravBeam</def>
            <amount>5</amount>
            <chance>0.5</chance>
          </li>
        </extraMeleeDamages>
      </li>
    </tools>
    <tradeability>None</tradeability>
    <allowedArchonexusCount>1</allowedArchonexusCount>
  </ThingDef><ThingDef Name="GravRifle_Bond" ParentName="MPBFPM_BaseHumanMakeableGun" Abstract="True">
    <label>persona grav rifle</label>
    <description>A heavy sniper weapon that firing gravitonium bullets. High attack range and damage, but low cooldown rate. It has a special long-range shooting ability.\n\nThis weapon has an onboard persona that can bond to only a single person. The wielder and intelligent weapon can synchronize their reflexes and attack with frightening speed, accuracy, and creativity. Once bonded to a wielder, the weapon's persona will refuse to be wielded by anyone else.</description>
    <graphicData>
      <texPath>Item/GravRifle</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(1.3,1.3)</drawSize>
    </graphicData>
    <soundInteract>Interact_Rifle</soundInteract>
    <generateCommonality>0.2</generateCommonality>
    <techLevel>Ultra</techLevel>
    <weaponClasses>
      <li>LongShots</li>
      <li>RangedHeavy</li>
      <li>Ultratech</li>
    </weaponClasses>
    <weaponTags>
      <li>SniperRifle</li>
    </weaponTags>
    <equippedStatOffsets>
      <MoveSpeed>-0.25</MoveSpeed>
    </equippedStatOffsets>
    <statBases>
      <MarketValue>5280.0</MarketValue>
      <Mass>10</Mass>
      <AccuracyTouch>0.44</AccuracyTouch>
      <AccuracyShort>0.704</AccuracyShort>
      <AccuracyMedium>0.88</AccuracyMedium>
      <AccuracyLong>1.023</AccuracyLong>
      <RangedWeapon_Cooldown>1.7</RangedWeapon_Cooldown>
      <Flammability>0.1</Flammability>
    </statBases>
    <comps>
      <li Class="CompProperties_EquippableAbilityReloadable">
        <abilityDef>GravRifle_LooongShot</abilityDef>
        <maxCharges>5</maxCharges>
        <soundReload>Standard_Reload</soundReload>
        <chargeNoun>gravitonium bullet</chargeNoun>
        <ammoDef>Gravitonium</ammoDef>
        <ammoCountPerCharge>4</ammoCountPerCharge>
        <baseReloadTicks>120</baseReloadTicks>
      </li>
      <li Class="CompProperties_Styleable"/>
      <li Class="CompProperties_Art">
        <nameMaker>NamerArtWeaponGun</nameMaker>
        <descriptionMaker>ArtDescription_WeaponGun</descriptionMaker>
        <minQualityForArtistic>Excellent</minQualityForArtistic>
      </li>
    </comps>
    <verbs>
      <li>
        <verbClass>Verb_Shoot</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Bullet_GravRifle_Bond</defaultProjectile>
        <warmupTime>4</warmupTime>
        <range>49.9</range>
        <soundCast>ChargeLance_Fire</soundCast>
        <soundCastTail>GunTail_Heavy</soundCastTail>
        <muzzleFlashScale>13</muzzleFlashScale>
        <aimingChargeMote>Mote_GravBlaster_Charge</aimingChargeMote>
        <aimingChargeMoteOffset>1</aimingChargeMoteOffset>
      </li>
    </verbs>
    <tools>
      <li>
        <label>barrel</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>19.061</power>
        <cooldownTime>2.125</cooldownTime>
      </li>
    </tools>
    <tradeability>None</tradeability>
  </ThingDef><ThingDef ParentName="MPBFPM_BaseBullet" Name="Bullet_GravBlast_Bond" Abstract="True">
        <label>bullet Grav blast</label>
        <graphicData>
            <texPath>Projectile/Bullet_GravBlast</texPath>
            <shaderType>TransparentPostLight</shaderType>
            <shaderParameters>
                <_distortionIntensity>0.3</_distortionIntensity>
            </shaderParameters>
        </graphicData>
        <thingClass>Projectile_Explosive</thingClass>
        <projectile>
            <speed>80</speed>
            <damageDef>GravBlastShockwave</damageDef>
            <damageAmountBase>3</damageAmountBase>
            <stoppingPower>5</stoppingPower>
            <armorPenetrationBase>0.70</armorPenetrationBase>
            <explosionRadius>8.5</explosionRadius>
            <ai_IsIncendiary>true</ai_IsIncendiary>
            <arcHeightFactor>0.3</arcHeightFactor>
            <screenShakeFactor>2</screenShakeFactor>
            <extraDamages>
                <li>
                    <def>VacuumBurn</def>
                    <amount>2</amount>
                    <chance>0.4</chance>
                </li>
            </extraDamages>
        </projectile>
    </ThingDef><ThingDef ParentName="MPBFPM_BaseBullet" Name="GravBarrierProj_Bond" Abstract="True">
    <label>gravity barrier</label>
    <graphicData>
      <texPath>UI/Singularity</texPath>
      <shaderType>TransparentPostLight</shaderType>
      <drawSize>0.3</drawSize>
    </graphicData>
    <thingClass>Projectile_Explosive</thingClass>
    <projectile>
      <damageDef>EMP</damageDef>
      <speed>80</speed>
      <explosionRadius>2.7</explosionRadius>
      <arcHeightFactor>1.0</arcHeightFactor>
      <!-- <flyOverhead>true</flyOverhead> -->
      <soundExplode>Explosion_EMP</soundExplode>
      <preExplosionSpawnSingleThingDef>GravBarrierCentre_GT</preExplosionSpawnSingleThingDef>
      <postExplosionSpawnThingDef>GravBarrier_GT</postExplosionSpawnThingDef>
      <postExplosionSpawnChance>1</postExplosionSpawnChance>
      <postExplosionSpawnThingCount>1</postExplosionSpawnThingCount>
      <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
      <explosionEffect>ExtinguisherExplosion</explosionEffect>
    </projectile>
  </ThingDef><ThingDef ParentName="MPBFPM_Bullet" Name="Bullet_GravRifle_Bond" Abstract="True">
    <label>bullet grav rifle</label>
    <graphicData>
      <texPath>Projectile/Bullet_GravRifle</texPath>
      <shaderType>TransparentPostLight</shaderType>
      <drawSize>2</drawSize>
    </graphicData>
    <!-- <thingClass>Projectile_Explosive</thingClass> -->
    <projectile>
      <damageDef>Bullet</damageDef>
      <damageAmountBase>46</damageAmountBase>
      <stoppingPower>6</stoppingPower>
      <armorPenetrationBase>0.60</armorPenetrationBase>
      <speed>300</speed>
      <screenShakeFactor>1</screenShakeFactor>
      <extraDamages>
        <li>
          <def>Bomb</def>
          <amount>5</amount>
          <chance>1</chance>
        </li>
        <li>
          <def>GravBlastHammer</def>
          <amount>2</amount>
          <chance>0.4</chance>
        </li>
      </extraDamages>
    </projectile>
  </ThingDef><ThingDef ParentName="MPBFPM_Bullet" Name="Bullet_GravRifleDistant_Bond" Abstract="True">
    <label>distant bullet grav rifle</label>
    <graphicData>
      <texPath>Projectile/Bullet_GravRifle</texPath>
      <shaderType>TransparentPostLight</shaderType>
      <drawSize>2</drawSize>
    </graphicData>
    <projectile>
      <damageDef>Bullet</damageDef>
      <damageAmountBase>78</damageAmountBase>
      <stoppingPower>6</stoppingPower>
      <armorPenetrationBase>0.90</armorPenetrationBase>
      <speed>600</speed>
      <screenShakeFactor>2</screenShakeFactor>
      <extraDamages>
        <li>
          <def>Bomb</def>
          <amount>15</amount>
          <armorPenetration>0.7</armorPenetration>
          <chance>1</chance>
        </li>
        <li>
          <def>Cut</def>
          <amount>10</amount>
          <armorPenetration>1.2</armorPenetration>
          <chance>1</chance>
        </li>
        <li>
          <def>GravBlastHammer</def>
          <amount>5</amount>
          <chance>1</chance>
        </li>
      </extraDamages>
    </projectile>
  </ThingDef></value>
            </Operation>
            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>Daria40K.MightyPersonaBondForgePatch</modId>
                <key>Daria40K_MightyPersonaBondForgePatch_gravtech</key>
                <defaultValue>true</defaultValue>
                <caseTrue>
                    <Operation Class="XmlExtensions.PatchOperationAdd">
                        <xpath>Defs</xpath>
                        <value><ThingDef ParentName="GravBlaster_Bond">
    <defName>GravBlaster_Bond</defName>
</ThingDef><ThingDef ParentName="GravBeamCannon_Bond">
    <defName>GravBeamCannon_Bond</defName>
</ThingDef><ThingDef ParentName="GravRifle_Bond">
    <defName>GravRifle_Bond</defName>
</ThingDef><ThingDef ParentName="Bullet_GravBlast_Bond">
    <defName>Bullet_GravBlast_Bond</defName>
</ThingDef><ThingDef ParentName="GravBarrierProj_Bond">
    <defName>GravBarrierProj_Bond</defName>
</ThingDef><ThingDef ParentName="Bullet_GravRifle_Bond">
    <defName>Bullet_GravRifle_Bond</defName>
</ThingDef><ThingDef ParentName="Bullet_GravRifleDistant_Bond">
    <defName>Bullet_GravRifleDistant_Bond</defName>
</ThingDef></value>
                    </Operation>
                </caseTrue>
            </Operation>
        </caseTrue>
    </Operation>
</Patch>